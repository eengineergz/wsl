{"version":3,"sources":["../webpack/bootstrap","../external \"path\"","../external \"vscode\"",".././node_modules/fs-extra/node_modules/graceful-fs/graceful-fs.js",".././node_modules/universalify/index.js","../external \"fs\"",".././node_modules/vscode-languageserver-protocol/lib/main.js",".././node_modules/fs-extra/lib/mkdirs/index.js",".././node_modules/vscode-jsonrpc/lib/main.js",".././node_modules/vscode-languageclient/lib/utils/is.js",".././node_modules/fs-extra/lib/path-exists/index.js",".././node_modules/vscode-languageclient/lib/client.js",".././node_modules/vscode-languageclient/lib/utils/uuid.js","../external \"util\"","../external \"child_process\"",".././node_modules/vscode-jsonrpc/lib/is.js","../external \"assert\"","../external \"os\"",".././node_modules/vscode-jsonrpc/lib/events.js",".././node_modules/fs-extra/lib/util/stat.js",".././node_modules/fs-extra/lib/remove/index.js",".././node_modules/vscode-jsonrpc/lib/messageReader.js",".././node_modules/vscode-jsonrpc/lib/messageWriter.js",".././src/commands.ts",".././src/settings.ts",".././node_modules/glob/glob.js",".././node_modules/minimatch/minimatch.js",".././node_modules/path-is-absolute/index.js",".././node_modules/fs-extra/lib/json/jsonfile.js","../external \"net\"",".././node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././node_modules/fs.realpath/index.js",".././node_modules/glob/common.js",".././node_modules/wrappy/wrappy.js",".././node_modules/once/once.js",".././node_modules/fs-extra/lib/fs/index.js","../external \"constants\"","../external \"stream\"",".././node_modules/fs-extra/lib/copy-sync/index.js",".././node_modules/fs-extra/lib/mkdirs/win32.js",".././node_modules/fs-extra/lib/util/utimes.js",".././node_modules/fs-extra/lib/copy/index.js",".././src/extension.ts",".././node_modules/vscode-languageclient/lib/main.js",".././node_modules/semver/semver.js",".././node_modules/vscode-jsonrpc/lib/messages.js",".././node_modules/vscode-jsonrpc/lib/cancellation.js",".././node_modules/vscode-jsonrpc/lib/linkedMap.js",".././node_modules/vscode-jsonrpc/lib/pipeSupport.js","../external \"crypto\"",".././node_modules/vscode-jsonrpc/lib/socketSupport.js",".././node_modules/vscode-languageserver-types/lib/esm/main.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageclient/lib/codeConverter.js",".././node_modules/vscode-languageclient/lib/protocolConverter.js",".././node_modules/vscode-languageclient/lib/utils/async.js",".././node_modules/vscode-languageclient/lib/colorProvider.js",".././node_modules/vscode-languageclient/lib/configuration.js",".././node_modules/vscode-languageclient/lib/implementation.js",".././node_modules/vscode-languageclient/lib/typeDefinition.js",".././node_modules/vscode-languageclient/lib/workspaceFolders.js",".././node_modules/vscode-languageclient/lib/foldingRange.js",".././node_modules/vscode-languageclient/lib/declaration.js",".././node_modules/vscode-languageclient/lib/utils/processes.js",".././src/javaServerStarter.ts",".././node_modules/fs.realpath/old.js",".././node_modules/brace-expansion/index.js",".././node_modules/concat-map/index.js",".././node_modules/balanced-match/index.js",".././node_modules/inherits/inherits.js",".././node_modules/inherits/inherits_browser.js","../external \"events\"",".././node_modules/glob/sync.js",".././node_modules/inflight/inflight.js",".././src/markdownPreviewProvider.ts",".././node_modules/fs-extra/lib/index.js",".././node_modules/fs-extra/node_modules/graceful-fs/polyfills.js",".././node_modules/fs-extra/node_modules/graceful-fs/legacy-streams.js",".././node_modules/fs-extra/node_modules/graceful-fs/clone.js",".././node_modules/fs-extra/lib/copy-sync/copy-sync.js",".././node_modules/fs-extra/lib/mkdirs/mkdirs.js",".././node_modules/fs-extra/lib/mkdirs/mkdirs-sync.js",".././node_modules/fs-extra/lib/util/buffer.js",".././node_modules/fs-extra/lib/copy/copy.js",".././node_modules/fs-extra/lib/empty/index.js",".././node_modules/fs-extra/lib/remove/rimraf.js",".././node_modules/fs-extra/lib/ensure/index.js",".././node_modules/fs-extra/lib/ensure/file.js",".././node_modules/fs-extra/lib/ensure/link.js",".././node_modules/fs-extra/lib/ensure/symlink.js",".././node_modules/fs-extra/lib/ensure/symlink-paths.js",".././node_modules/fs-extra/lib/ensure/symlink-type.js",".././node_modules/fs-extra/lib/json/index.js",".././node_modules/jsonfile/index.js",".././node_modules/graceful-fs/graceful-fs.js",".././node_modules/graceful-fs/polyfills.js",".././node_modules/graceful-fs/legacy-streams.js",".././node_modules/graceful-fs/clone.js",".././node_modules/fs-extra/lib/json/output-json.js",".././node_modules/fs-extra/lib/json/output-json-sync.js",".././node_modules/fs-extra/lib/move-sync/index.js",".././node_modules/fs-extra/lib/move-sync/move-sync.js",".././node_modules/fs-extra/lib/move/index.js",".././node_modules/fs-extra/lib/move/move.js",".././node_modules/fs-extra/lib/output/index.js",".././src/plugin.ts",".././src/requirements.ts",".././node_modules/path-exists/index.js",".././node_modules/expand-home-dir/index.js",".././node_modules/find-java-home/index.js",".././node_modules/find-java-home/node_modules/which/which.js",".././node_modules/winreg/lib/registry.js",".././src/tagClosing.ts",".././src/variableSubstitution.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","gracefulQueue","previousSymbol","fs","polyfills","legacy","clone","util","publishQueue","context","queue","for","debug","debuglog","test","process","env","NODE_DEBUG","format","apply","arguments","split","join","console","error","global","close","fs$close","fd","cb","err","retry","this","closeSync","fs$closeSync","on","equal","length","patch","gracefulify","createReadStream","path","options","ReadStream","createWriteStream","WriteStream","fs$readFile","readFile","go$readFile","code","enqueue","fs$writeFile","writeFile","data","go$writeFile","fs$appendFile","appendFile","go$appendFile","fs$readdir","readdir","go$readdir","args","push","files","sort","version","substr","legStreams","fs$ReadStream","open","that","flags","autoClose","destroy","emit","read","fs$WriteStream","set","val","configurable","FileReadStream","FileWriteStream","fs$open","go$open","elem","shift","TEST_GRACEFUL_FS_GLOBAL_PATCH","__patched","fromCallback","fn","Promise","resolve","reject","res","fromPromise","then","__export","vscode_jsonrpc_1","ErrorCodes","ResponseError","CancellationToken","CancellationTokenSource","Disposable","Event","Emitter","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","RequestType","RequestType0","NotificationType","NotificationType0","MessageReader","MessageWriter","ConnectionStrategy","StreamMessageReader","StreamMessageWriter","IPCMessageReader","IPCMessageWriter","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","createProtocolConnection","reader","writer","logger","strategy","createMessageConnection","mkdirs","u","mkdirsSync","mkdirp","mkdirpSync","ensureDir","ensureDirSync","Is","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","SocketMessageReader","messageWriter_1","SocketMessageWriter","events_1","cancellation_1","linkedMap_1","CancelNotification","ConnectionErrors","ConnectionState","type","NullLogger","freeze","warn","info","log","fromString","toLowerCase","Off","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","message","super","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","timer","tracer","starRequestHandler","undefined","requestHandlers","starNotificationHandler","notificationHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","isRequestMessage","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","string","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","sendRequest","throwIfNotListening","is","last","slice","map","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","event","onUnhandledNotification","onDispose","dispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","verbose","candidate","input","output","end","isMessageWriter","Array","isArray","Number","stringArray","every","typedArray","check","thenable","pathExists","access","catch","pathExistsSync","existsSync","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","async_1","UUID","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","count","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_event","_type","_middleware","_createParams","_selectorFilter","_selectors","Map","selectors","textDocument","selector","languages","match","registerOptions","documentSelector","_listener","values","notificationSent","_data","clear","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","has","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","provider","registerLanguageProvider","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","completionProvider","triggerCharacters","provideCompletionItems","position","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","codeActionKinds","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","current","obj","workspaceFolder","index","indexOf","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","commands","command","registerCommand","MessageTransports","OnReady","_resolve","_reject","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","appendLine","toLocaleTimeString","data2String","Info","show","Warn","append","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","showInformationMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","createConnection","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","title","folders","folder","scheme","cleanUp","shutdown","exit","channel","diagnostics","listener","didChangeWatchedFiles","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","fillClientCapabilities","registration","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","RequestCancelled","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","Math","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","parse","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","nodeVersion","versions","node","nodeVersionMajor","parseInt","nodeVersionMinor","nodeVersionPatch","nodeSupportsBigInt","isSrcSubdir","src","dest","srcArr","sep","filter","destArr","reduce","acc","cur","errMsg","funcName","checkPaths","stat","bigint","srcStat","destStat","getStats","stats","ino","dev","isDirectory","checkPathsSync","statSync","getStatsSync","checkParentPaths","srcParent","dirname","destParent","root","checkParentPathsSync","rimraf","removeSync","sync","CR","Buffer","from","LF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","ceil","concat","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","clearTimeout","setTimeout","firePartialMessage","waitingTime","eventEmitter","socket","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","handleError","Commands","AUTO_CLOSE_TAGS","SHOW_REFERENCES","EDITOR_SHOW_REFERENCES","RELOAD_WINDOW","OPEN_SETTINGS","MARKDOWN_API_RENDER","OPEN_DOCS","OPEN_DOCS_HOME","EXECUTE_WORKSPACE_COMMAND","VALIDATE_CURRENT_FILE","VALIDATE_ALL_FILES","vmArgsCache","ignoreAutoCloseTags","ignoreVMArgs","oldXMLConfig","getXMLConfiguration","oldJavaConfig","getJavaConfiguration","getXConfiguration","configName","hasPreferenceChanged","oldConfig","newConfig","preference","createReloadWindowMessage","selection","executeCommand","IS_WORKSPACE_JDK_ALLOWED","IS_WORKSPACE_JDK_XML_ALLOWED","IS_WORKSPACE_VMARGS_XML_ALLOWED","xmlServerVmargs","currentVMArgs","verifyVMArgs","configXML","closeTags","closeBrackets","scopeInfo","configurationKey","scope","configurationTarget","workspaceFolderValue","workspaceValue","globalValue","getScopeLevel","update","verifyAutoClosing","newXMLConfig","newJavaConfig","redhatJavaExtension","extensions","getExtension","isActive","prefix","storagePath","workspacePath","vmargs","agentFlag","arg","startsWith","substring","glob","rp","minimatch","inherits","Minimatch","EE","EventEmitter","assert","isAbsolute","globSync","common","setopts","alphasort","alphasorti","ownProp","inflight","childrenIgnored","isIgnored","once","pattern","TypeError","Glob","GlobSync","_didRealPath","matches","self","_processing","_emitQueue","_processQueue","paused","noprocess","done","_process","_finish","hasMagic","options_","origin","extend","j","aborted","realpath","_didRealpath","_realpath","finish","found","_realpathSet","next","matchset","_makeAbs","realpathCache","er","real","syscall","_mark","mark","f","makeAbs","abort","pause","resume","eq","_emitMatch","pq","inGlobStar","_processSimple","remain","abs","GLOBSTAR","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","negate","rawGlob","_glob","dotOk","dot","charAt","matchedEntries","nomount","absolute","nodir","cache","st","statCache","_readdirInGlobStar","follow","lstatcb","lstat","isSym","isSymbolicLink","symlinks","_readdirError","_readdirEntries","readdirCb","cwdAbs","cwd","strict","silent","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","exists","_processSimple2","trail","platform","replace","needDir","maxLength","statcb","_stat2","expand","plTypes","reSpecials","slashSplit","ext","a","b","k","nocomment","regexp","comment","make","braceExpand","nobrace","list","defaults","def","orig","_made","parseNegate","globSet","globParts","si","negateOffset","nonegate","isSub","noglobstar","stateChar","re","nocase","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","clearStateChar","qmark","noext","reStart","pl","pop","reEnd","cs","RegExp","sp","SUBPARSE","tail","_","$1","$2","addPatternStart","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","globUnescape","regExp","_src","makeRe","twoStar","regExpEscape","ex","mm","nonull","partial","filename","matchBase","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","posix","win32","exec","device","isUnc","jsonFile","readJson","readJsonSync","readFileSync","writeJson","writeJsonSync","writeFileSync","ProtocolCompletionItem","CompletionItem","label","default","ProtocolCodeLens","CodeLens","ProtocolDocumentLink","DocumentLink","realpathSync","monkeypatch","unmonkeypatch","origRealpath","origRealpathSync","ok","old","newError","field","nounique","nosort","Infinity","ignore","ignoreMap","setupIgnores","changedCwd","nou","all","literal","notDir","isDir","slash","mabs","gmatcher","localeCompare","gpattern","matcher","wrappy","wrapper","called","onceStrict","onceError","proto","api","offset","bytesRead","bytesWritten","native","copySync","getRootPath","normalize","INVALID_PATH_CHARS","invalidWin32Path","os","hasMillisRes","tmpfile","tmpdir","futimes","mtime","hasMillisResSync","openSync","futimesSync","timeRemoveMillis","getTime","utimesMillis","atime","futimesErr","closeErr","utimesMillisSync","ExecuteClientCommandRequest","TagCloseRequest","SymbolsLimitExceededNotification","ActionableNotification","languageClient","getIndentationRules","indentationRules","increaseIndentPattern","decreaseIndentPattern","onEnterRules","beforeText","afterText","indentAction","IndentAction","IndentOutdent","Indent","subscriptions","markdownPreviewProvider","asAbsolutePath","page","endsWith","sectionId","externalXmlSettings","homedir","logfile","requirements","resolveRequirements","openUrl","language","Never","getXMLSettings","java_home","extendedClientCapabilities","codeLensKind","actionableNotificationSupport","openSettingsCommandSupport","onConfigurationChange","serverOptions","prepareExecutable","collectXmlJavaExtensions","LanguageClient","toDispose","setLanguageConfiguration","subscribeJDKChangeConfiguration","uriString","openTextDocument","locations","asLocation","notification","severity","titles","setupActionableNotificationListener","activeTextEditor","identifier","TextDocumentIdentifier","rest","commandArgs","settingId","activateTagClosing","xml","xsl","onExtensionChange","ConfigurationRequest","activeEditor","items","scopeUri","insertSpaces","tabSize","onDidChangeActiveTextEditor","containsVariableReferenceToCurrentFile","addXMLCatalogs","catalogs","externalXmlCatalogs","xmlCatalogs","includes","removeXMLCatalogs","itemIndex","addXMLFileAssociations","fileAssociations","externalfileAssociations","xmlFileAssociations","fileAssociation","systemId","removeXMLFileAssociations","findIndex","javaHome","x","server","logs","enabled","splitAttributes","autoCloseTags","catalog","getVariableSubstitutedAssociations","cp","SemVer","client_1","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","port","detached","arg1","arg2","arg3","arg4","arg5","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","kill","terminate","stderr","stdout","stdin","runDebug","run","v8debug","execArgv","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","stdio","runtime","pipeName","ipc","pipe","fork","onConnected","protocol","execOptions","getEnvironment","serverProcess","spawn","registerFeatures","createAll","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","_mainGetRootPath","SettingMonitor","_setting","primary","needsStart","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","raw","major","minor","num","build","valid","v","clean","compare","compareMain","comparePre","compareIdentifiers","inc","release","diff","version1","version2","v1","v2","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","rsort","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","max","maxSV","rangeObj","minSatisfying","min","minSV","validRange","ltr","gtr","parsed","r1","r2","coerce","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","MessageReadError","AbstractMessageType","_numberOfParams","isCancellationRequested","Cancelled","shortcutEvent","handle","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","connectResolve","connected","createServer","removeListener","Position","Location","LocationLink","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","Diagnostic","TextEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","line","character","objectLiteral","one","two","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","location","Information","Hint","_i","newText","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","TextDocumentItem","MarkupContent","InsertTextFormat","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolInformation","TextEditChangeImpl","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","languageId","text","isIncomplete","fromPlainText","plainText","contents","documentation","parameters","Read","Write","containerName","CodeActionContext","CodeAction","FormattingOptions","detail","selectionRange","children","deprecated","only","commandOrEdit","TextDocument","TextDocumentSaveReason","EOL","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","lastModifiedOffset","startOffset","endOffset","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","mid","lineOffset","nextLineOffset","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","DocumentFilter","Abort","Transactional","Undo","InitializeError","unknownProtocolVersion","Log","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","asTriggerKind","triggerKind","asWorkerPosition","asDiagnosticSeverity","asDiagnostic","asTextEdit","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","protocolItem","original","asDocumentation","filterText","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","commitCharacters","preselect","includeDeclaration","ls","CodeBlock","diagnostic","asDiagnosticRelatedInformation","information","MarkdownString","asCompletionInsertText","itemKind","asSignatureInformations","asSignatureInformation","asParameterInformations","asParameterInformation","asLocationLink","asLocationResult","asDocumentHighlight","asDocumentHighlightKind","asSymbolKind","asSymbolInformation","asDocumentSymbol","child","kindMapping","asCodeActionKind","parts","Empty","part","asColor","asColorInformation","ci","asColorPresentation","presentation","asFoldingRangeKind","Comment","Imports","Region","asFoldingRange","hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","SignatureHelp","activeSignature","activeParameter","signatures","asDeclarationResult","asCommands","asFoldingRanges","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","colorProvider","implCapabilities","provideColorPresentations","requestParams","provideDocumentColors","registerColorProvider","configuration","lastIndexOf","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","asProtocol","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","capability","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","registerFoldingRangeProvider","declarationSupport","declarationProvider","declCapabilities","provideDeclaration","registerDeclarationProvider","isWindows","isMacintosh","isLinux","execFileSync","cmd","__dirname","spawnSync","DEBUG","hasDebugFlag","parseVMargs","vmargsLine","xmlJavaExtensions","executable","vmargsCheck","getJavaagentFlag","keyVmargs","getKey","globalState","watchParentProcess","java_version","server_home","launchersFound","xmlJavaExtensionsClasspath","pathSeparator","prepareParams","pathModule","maybeCallback","backtrace","missingCallback","throwDeprecation","noDeprecation","traceDeprecation","rethrow","nextPartRe","splitRootRe","pos","base","seenLinks","knownHard","lstatSync","lastIndex","resolvedLink","linkTarget","readlinkSync","nextTick","LOOP","gotResolvedLink","gotStat","gotTarget","readlink","concatMap","balanced","isTop","expansions","pre","isNumericSequence","body","isAlphaSequence","isSequence","isOptions","post","escClose","parseCommaParts","postParts","embrace","N","y","width","incr","pad","isPadded","fromCharCode","need","z","el","expansion","escSlash","escOpen","escComma","escPeriod","escapeBraces","unescapeBraces","charCodeAt","xs","maybeMatch","reg","begs","beg","ai","bi","ctor","superCtor","super_","constructor","TempCtor","newPattern","readdirSync","reqs","RES","cbs","makeres","documentCache","markdownFilePath","panel","createWebviewPanel","ViewColumn","Active","localResourceRoots","extensionPath","retainContextWhenHidden","enableFindWidget","enableScripts","enableCommandUris","onDidDispose","iconPath","webview","html","getHtmlContent","reveal","viewColumn","nonce","getNonce","styles","getStyles","markdownString","fse","appName","_match","linkText","cspSource","asWebviewUri","styleUri","possible","getOwnPropertyDescriptor","promises","constants","origCwd","GRACEFUL_FS_PLATFORM","chdir","lchmod","O_WRONLY","O_SYMLINK","fchmod","err2","lchmodSync","threw","fchmodSync","patchLchmod","lutimes","at","mt","er2","lutimesSync","_a","_b","_c","patchLutimes","chown","chownFix","fchown","lchown","chmod","chmodFix","chownSync","chownFixSync","fchownSync","lchownSync","chmodSync","chmodFixSync","statFix","fstat","statFixSync","fstatSync","uid","gid","fs$rename","backoff","CB","stater","chownErOk","getuid","fs$read","callback_","eagCounter","__","__proto__","readSync","fs$readSync","Stream","bufferSize","setEncoding","_read","busy","_queue","_open","flush","getOwnPropertyNames","utimesSync","startCopy","opts","dereference","mkdirSync","copyDir","mkDirAndCopy","onDir","isFile","isCharacterDevice","isBlockDevice","unlinkSync","copyFile","errorOnExist","mayCopyFile","onFile","resolvedSrc","resolvedDest","symlinkSync","copyLink","onLink","copyFileSync","preserveTimestamps","_buff","fdr","fdw","writeSync","copyFileFallback","srcItem","destItem","copyDirItem","clobber","arch","handleFilterAndCopy","o777","made","errInval","xfs","umask","mkdir","err0","err1","utimes","checkParentDir","dirExists","handleFilter","onInclude","include","unlink","setDestModeAndTimestamps","rs","ws","copyDirItems","symlink","emptyDir","dir","deleteItem","emptyDirSync","emptydirSync","emptydir","maxBusyTries","busyTries","strictEqual","rimraf_","fixWinEPERM","rmdir","er3","fixWinEPERMSync","rmdirSync","originalEr","errState","rmkids","rimrafSync","rmkidsSync","createFileSync","ensureFile","ensureFileSync","createLink","createLinkSync","ensureLink","ensureLinkSync","createSymlink","createSymlinkSync","ensureSymlink","ensureSymlinkSync","makeFile","srcpath","dstpath","makeLink","destinationExists","linkSync","_mkdirs","_symlinkPaths","symlinkPaths","symlinkPathsSync","_symlinkType","symlinkType","symlinkTypeSync","relative","toDst","toCwd","dstdir","relativeToDst","outputJson","outputJsonSync","outputJSON","outputJSONSync","writeJSON","writeJSONSync","readJSON","readJSONSync","_fs","spaces","replacer","stripBom","isBuffer","jsonfile","shouldThrow","throws","reviver","rval","itDoes","moveSync","renameSync","moveAcrossDevice","doRename","move","destExists","outputFile","outputFileSync","existingExtensions","jars","extension","contributesSection","packageJSON","xmLJavaExtensionPath","oldExtensions","Set","newExtensions","hasChanged","newExtension","vscode","restartId","expandHomeDir","findJavaHome","JAVA_FILENAME","readXMLJavaHomeConfig","isVerified","ConfigurationTarget","Workspace","vmargsVerified","parseMajorVersion","javaVersion","openJDKDownload","cause","jdkUrl","replaceClose","readJavaHomeConfig","allowJre","home","checkJavaRuntime","execFile","promisify","pAccess","async","accessSync","which","WinReg","macUtility","possibleKeyPaths","JAVA_HOME","dirIsJavaHome","paths","registryJavaHome","keysFound","javaKeys","aVer","parseFloat","findInRegistry","proposed","findLinkedFile","out","pathEnv","PATH","COLON","pathExt","PATHEXT","ll","isExe","F","E","ii","mod","getgid","absUnix","HIVES","REG_TYPES","KEY_PATTERN","PATH_PATTERN","ITEM_PATTERN","ProcessUncleanExitError","captureStackTrace","__defineGetter__","captureOutput","mkErrorMsg","registryCommand","pushArch","archString","convertArchString","getRegExePath","windir","RegistryItem","host","hive","_host","_hive","_key","_arch","Registry","HKLM","HKCU","HKCR","HKU","HKCC","REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE","DEFAULT_VALUE","proc","lines","lineNumber","erase","keyExists","valueExists","tagProvider","supportedLanguages","TRIGGER_CHARACTERS","isEnabled","activeDocument","lastChange","lastCharacter","rangeStart","replaceLocation","snippet","startPosition","endPosition","insertSnippet","updateEnabledState","editor","VariableSubstitution","getValue","varName","varKind","currentFileUri","currentWorkspaceUri","getReplaceRegExp","replaceRegExp","VariableSubstitutionKind","VARIABLE_SUBSTITUTIONS","basename","extname","associations","currentFile","currentWorkspace","getWorkspaceFolder","variablesToSubstitute","variable","subVars","newVal","settingVariable","substituteString","association","fileVariables"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 43);\n","module.exports = require(\"path\");","module.exports = require(\"vscode\");","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = fs[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function () {\n    if (typeof arguments[arguments.length - 1] === 'function') fn.apply(this, arguments)\n    else {\n      return new Promise((resolve, reject) => {\n        arguments[arguments.length] = (err, res) => {\n          if (err) return reject(err)\n          resolve(res)\n        }\n        arguments.length++\n        fn.apply(this, arguments)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function () {\n    const cb = arguments[arguments.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, arguments)\n    else fn.apply(this, arguments).then(r => cb(null, r), cb)\n  }, 'name', { value: fn.name })\n}\n","module.exports = require(\"fs\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","'use strict'\nconst u = require('universalify').fromCallback\nconst mkdirs = u(require('./mkdirs'))\nconst mkdirsSync = require('./mkdirs-sync')\n\nmodule.exports = {\n  mkdirs,\n  mkdirsSync,\n  // alias\n  mkdirp: mkdirs,\n  mkdirpSync: mkdirsSync,\n  ensureDir: mkdirs,\n  ensureDirSync: mkdirsSync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.completionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.hoverProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.definitionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.referencesProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: undefined\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    '',\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeActionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let codeActionKinds = undefined;\r\n        if (!Is.boolean(capabilities.codeActionProvider)) {\r\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeLensProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.renameProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let options = Object.assign({}, { documentSelector: documentSelector });\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        else {\r\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && result.range) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                return null;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentLinkProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    logTrace(message, data) {\r\n        this.outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.outputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.outputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.outputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp();\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        ensure(ensure(result, 'textDocument'), 'publishDiagnostics').relatedInformation = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","module.exports = require(\"util\");","module.exports = require(\"child_process\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","module.exports = require(\"assert\");","module.exports = require(\"os\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\n\nconst NODE_VERSION_MAJOR_WITH_BIGINT = 10\nconst NODE_VERSION_MINOR_WITH_BIGINT = 5\nconst NODE_VERSION_PATCH_WITH_BIGINT = 0\nconst nodeVersion = process.versions.node.split('.')\nconst nodeVersionMajor = Number.parseInt(nodeVersion[0], 10)\nconst nodeVersionMinor = Number.parseInt(nodeVersion[1], 10)\nconst nodeVersionPatch = Number.parseInt(nodeVersion[2], 10)\n\nfunction nodeSupportsBigInt () {\n  if (nodeVersionMajor > NODE_VERSION_MAJOR_WITH_BIGINT) {\n    return true\n  } else if (nodeVersionMajor === NODE_VERSION_MAJOR_WITH_BIGINT) {\n    if (nodeVersionMinor > NODE_VERSION_MINOR_WITH_BIGINT) {\n      return true\n    } else if (nodeVersionMinor === NODE_VERSION_MINOR_WITH_BIGINT) {\n      if (nodeVersionPatch >= NODE_VERSION_PATCH_WITH_BIGINT) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction getStats (src, dest, cb) {\n  if (nodeSupportsBigInt()) {\n    fs.stat(src, { bigint: true }, (err, srcStat) => {\n      if (err) return cb(err)\n      fs.stat(dest, { bigint: true }, (err, destStat) => {\n        if (err) {\n          if (err.code === 'ENOENT') return cb(null, { srcStat, destStat: null })\n          return cb(err)\n        }\n        return cb(null, { srcStat, destStat })\n      })\n    })\n  } else {\n    fs.stat(src, (err, srcStat) => {\n      if (err) return cb(err)\n      fs.stat(dest, (err, destStat) => {\n        if (err) {\n          if (err.code === 'ENOENT') return cb(null, { srcStat, destStat: null })\n          return cb(err)\n        }\n        return cb(null, { srcStat, destStat })\n      })\n    })\n  }\n}\n\nfunction getStatsSync (src, dest) {\n  let srcStat, destStat\n  if (nodeSupportsBigInt()) {\n    srcStat = fs.statSync(src, { bigint: true })\n  } else {\n    srcStat = fs.statSync(src)\n  }\n  try {\n    if (nodeSupportsBigInt()) {\n      destStat = fs.statSync(dest, { bigint: true })\n    } else {\n      destStat = fs.statSync(dest)\n    }\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nfunction checkPaths (src, dest, funcName, cb) {\n  getStats(src, dest, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    if (destStat && destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n      return cb(new Error('Source and destination must not be the same.'))\n    }\n    if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return cb(null, { srcStat, destStat })\n  })\n}\n\nfunction checkPathsSync (src, dest, funcName) {\n  const { srcStat, destStat } = getStatsSync(src, dest)\n  if (destStat && destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n    throw new Error('Source and destination must not be the same.')\n  }\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nfunction checkParentPaths (src, srcStat, dest, funcName, cb) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return cb()\n  if (nodeSupportsBigInt()) {\n    fs.stat(destParent, { bigint: true }, (err, destStat) => {\n      if (err) {\n        if (err.code === 'ENOENT') return cb()\n        return cb(err)\n      }\n      if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n        return cb(new Error(errMsg(src, dest, funcName)))\n      }\n      return checkParentPaths(src, srcStat, destParent, funcName, cb)\n    })\n  } else {\n    fs.stat(destParent, (err, destStat) => {\n      if (err) {\n        if (err.code === 'ENOENT') return cb()\n        return cb(err)\n      }\n      if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n        return cb(new Error(errMsg(src, dest, funcName)))\n      }\n      return checkParentPaths(src, srcStat, destParent, funcName, cb)\n    })\n  }\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    if (nodeSupportsBigInt()) {\n      destStat = fs.statSync(destParent, { bigint: true })\n    } else {\n      destStat = fs.statSync(destParent)\n    }\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.reduce((acc, cur, i) => acc && destArr[i] === cur, true)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  checkPaths,\n  checkPathsSync,\n  checkParentPaths,\n  checkParentPathsSync,\n  isSrcSubdir\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst rimraf = require('./rimraf')\n\nmodule.exports = {\n  remove: u(rimraf),\n  removeSync: rimraf.sync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/**\r\n *  Copyright (c) 2019 Red Hat, Inc. and others.\r\n *  All rights reserved. This program and the accompanying materials\r\n *  are made available under the terms of the Eclipse Public License v1.0\r\n *  which accompanies this distribution, and is available at\r\n *  http://www.eclipse.org/legal/epl-v10.html\r\n *\r\n *  Contributors:\r\n *  Red Hat Inc. - initial API and implementation\r\n */\r\n'use strict';\r\n\r\n/**\r\n * Commonly used commands\r\n */\r\nexport namespace Commands {\r\n\r\n    /**\r\n     * Auto close tags\r\n     */\r\n    export const AUTO_CLOSE_TAGS = 'xml.completion.autoCloseTags';\r\n\r\n    /**\r\n     * Show XML references\r\n     */\r\n    export const SHOW_REFERENCES = 'xml.show.references';\r\n\r\n    /**\r\n     * Show editor references\r\n     */\r\n    export const EDITOR_SHOW_REFERENCES = 'editor.action.showReferences';\r\n\r\n    /**\r\n     * Reload VS Code window\r\n     */\r\n    export const RELOAD_WINDOW = 'workbench.action.reloadWindow';\r\n\r\n    /**\r\n     * Open settings command\r\n     *\r\n     * A `settingId: string` parameter can be optionally provided\r\n     */\r\n    export const OPEN_SETTINGS = 'xml.open.settings';\r\n\r\n    /**\r\n     * Render markdown string to html string\r\n     */\r\n    export const MARKDOWN_API_RENDER = 'markdown.api.render';\r\n\r\n    export const OPEN_DOCS = \"xml.open.docs\";\r\n\r\n    export const OPEN_DOCS_HOME = \"xml.open.docs.home\";\r\n\r\n    /**\r\n     * VSCode client command to executes an LSP command on the XML Language Server\r\n     */\r\n    export const EXECUTE_WORKSPACE_COMMAND = \"xml.workspace.executeCommand\";\r\n\r\n    export const VALIDATE_CURRENT_FILE = \"xml.validation.current.file\";\r\n\r\n    export const VALIDATE_ALL_FILES = \"xml.validation.all.files\";\r\n}","import { WorkspaceConfiguration, workspace, window, commands, extensions, Extension } from \"vscode\";\nimport { ScopeInfo } from \"./extension\";\nimport * as path from 'path';\n\nlet vmArgsCache;\nlet ignoreAutoCloseTags = false;\nlet ignoreVMArgs = false;\nlet oldXMLConfig: WorkspaceConfiguration = getXMLConfiguration();\nlet oldJavaConfig: WorkspaceConfiguration = getJavaConfiguration();\n\nconst restartButton = 'Restart Now';\nconst ignoreButton = 'Ignore'\nconst restartId = \"workbench.action.reloadWindow\";\nexport const IS_WORKSPACE_JDK_ALLOWED = \"java.ls.isJdkAllowed\";\nexport const IS_WORKSPACE_JDK_XML_ALLOWED = \"java.ls.isJdkXmlAllowed\";\nexport const IS_WORKSPACE_VMARGS_XML_ALLOWED = \"java.ls.isVmargsXmlAllowed\";\nexport const xmlServerVmargs = 'xml.server.vmargs';\n\nexport function getXMLConfiguration(): WorkspaceConfiguration {\n  return getXConfiguration(\"xml\")\n}\n\nexport function getJavaConfiguration(): WorkspaceConfiguration {\n  return getXConfiguration(\"java\");\n}\n\nexport function getXConfiguration(configName: string) {\n  return workspace.getConfiguration(configName);\n}\n\nexport function onConfigurationChange() {\n  if(!ignoreVMArgs) {\n    verifyVMArgs();\n  }\n\n  if(!ignoreAutoCloseTags) {\n    verifyAutoClosing();\n  }\n}\n\nexport function subscribeJDKChangeConfiguration() {\n  return workspace.onDidChangeConfiguration(params => {\n\n    //handle \"xml.java.home\" change\n    if(params.affectsConfiguration(\"xml\")) {\n      const newXMLConfig = getXMLConfiguration();\n      if(hasPreferenceChanged(oldXMLConfig, newXMLConfig, \"java.home\")) { // checks \"xml.java.home\", not \"java.home\"\n        createReloadWindowMessage(\"`xml.java.home` path has changed. Please restart VS Code.\");\n      }\n      // update to newest version of config\n      oldXMLConfig = newXMLConfig;\n      return;\n    }\n    \n    //handle \"java.home\" change\n    if(oldXMLConfig.get(\"java.home\") == null) { // if \"xml.java.home\" exists, dont even look at \"java.home\"\n      if(params.affectsConfiguration(\"java\")) {\n        const newJavaConfig = getJavaConfiguration();\n        //don't need to handle reload message if redhat.java extension exists (it will handle it)\n        const redhatJavaExtension: Extension<any> = extensions.getExtension(\"redhat.java\");\n        const isJavaExtensionActive: boolean = redhatJavaExtension != null && redhatJavaExtension.isActive;\n        if(!isJavaExtensionActive && hasPreferenceChanged(oldJavaConfig, newJavaConfig, \"home\")) { // checks \"java.home\"\n          createReloadWindowMessage(\"`java.home` path has changed. Please restart VS Code.\");\n        }\n        oldJavaConfig = newJavaConfig;\n      }\n      return;\n    }\n  });\n}\n\nfunction hasPreferenceChanged(oldConfig: WorkspaceConfiguration, newConfig: WorkspaceConfiguration, preference: string) {\n  return oldConfig.get(preference) != newConfig.get(preference);\n}\n\nfunction createReloadWindowMessage(message: string) : string{\n  window.showWarningMessage(message, restartButton, ignoreButton).then((selection) => {\n    if (restartButton === selection) {\n      commands.executeCommand(restartId);\n    }\n  });\n\n  return ignoreButton;\n}\n\nfunction verifyVMArgs() {\n  let currentVMArgs = workspace.getConfiguration(\"xml.server\").get(\"vmargs\");\n  if(vmArgsCache != undefined) {\n    if(vmArgsCache != currentVMArgs) {\n      let selection = createReloadWindowMessage(\"XML Language Server configuration changed, please restart VS Code.\");\n      if(selection == ignoreButton) {\n        ignoreVMArgs = true;\n      }\n    }\n  }\n  else {\n    vmArgsCache = currentVMArgs;\n  }\n}\n\nfunction verifyAutoClosing() {\n  let configXML = workspace.getConfiguration();\n  let closeTags = configXML.get(\"xml.completion.autoCloseTags\");\n  let closeBrackets = configXML.get(\"[xml]\")[\"editor.autoClosingBrackets\"];\n  if (closeTags && closeBrackets != \"never\") {\n    window.showWarningMessage(\n      \"The [xml].editor.autoClosingBrackets setting conflicts with xml.completion.autoCloseTags. It's recommended to disable it.\",\n      \"Disable\",\n      ignoreButton).then((selection) => {\n        if (selection == \"Disable\") {\n          let scopeInfo : ScopeInfo = getScopeLevel(\"\", \"[xml]\");\n          workspace.getConfiguration().update(\"[xml]\", { \"editor.autoClosingBrackets\": \"never\" }, scopeInfo.configurationTarget).then(\n            () => console.log('[xml].editor.autoClosingBrackets globally set to never'),\n            (error) => console.log(error)\n          );\n        }\n        else if(selection == \"Ignore\") {\n          ignoreAutoCloseTags = true;\n        }\n      });\n  }\n}\n\nfunction getScopeLevel(configurationKey : string, key : string) : ScopeInfo{\n  let configXML = workspace.getConfiguration(configurationKey);\n  let result = configXML.inspect(key);\n  let scope, configurationTarget;\n  if(result.workspaceFolderValue == undefined) {\n    if(result.workspaceValue == undefined) {\n      if(result.globalValue == undefined) {\n        scope = \"default\"\n        configurationTarget = true;\n      }\n      else {\n        scope = \"global\";\n        configurationTarget = true;\n      }\n    }\n    else {\n      scope = \"workspace\";\n      configurationTarget = false;\n    }\n  }\n  else {\n    scope = \"folder\";\n    configurationTarget = undefined;\n  }\n  let scopeInfo : ScopeInfo = {\"scope\": scope, \"configurationTarget\": configurationTarget};\n  return scopeInfo;\n}\n\nexport function getKey(prefix, storagePath, value) {\n  const workspacePath = path.resolve(storagePath + '/jdt_ws');\n  if (workspace.name !== undefined) {\n    return `${prefix}::${workspacePath}::${value}`;\n  }\n  else {\n    return `${prefix}::${value}`;\n  }\n}\n\nexport function getJavaagentFlag(vmargs) {\n  const javaagent = '-javaagent:';\n  const args = vmargs.split(\" \");\n  let agentFlag = null;\n  for (const arg of args) {\n    if (arg.startsWith(javaagent)) {\n      agentFlag = arg.substring(javaagent.length);\n      break;\n    }\n  }\n  return agentFlag;\n}","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: u(jsonFile.readFile),\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: u(jsonFile.writeFile),\n  writeJsonSync: jsonFile.writeFileSync\n}\n","module.exports = require(\"net\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchown',\n  'lchmod',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'readFile',\n  'readdir',\n  'readlink',\n  'realpath',\n  'rename',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.copyFile was added in Node.js v8.5.0\n  // fs.mkdtemp was added in Node.js v5.10.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export all keys:\nObject.keys(fs).forEach(key => {\n  if (key === 'promises') {\n    // fs.promises is a getter property that triggers ExperimentalWarning\n    // Don't re-export it here, the getter is defined in \"lib/index.js\"\n    return\n  }\n  exports[key] = fs[key]\n})\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read() & fs.write need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// fs.realpath.native only available in Node v9.2+\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n}\n","module.exports = require(\"constants\");","module.exports = require(\"stream\");","'use strict'\n\nmodule.exports = {\n  copySync: require('./copy-sync')\n}\n","'use strict'\n\nconst path = require('path')\n\n// get drive on windows\nfunction getRootPath (p) {\n  p = path.normalize(path.resolve(p)).split(path.sep)\n  if (p.length > 0) return p[0]\n  return null\n}\n\n// http://stackoverflow.com/a/62888/10333 contains more accurate\n// TODO: expand to include the rest\nconst INVALID_PATH_CHARS = /[<>:\"|?*]/\n\nfunction invalidWin32Path (p) {\n  const rp = getRootPath(p)\n  p = p.replace(rp, '')\n  return INVALID_PATH_CHARS.test(p)\n}\n\nmodule.exports = {\n  getRootPath,\n  invalidWin32Path\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst os = require('os')\nconst path = require('path')\n\n// HFS, ext{2,3}, FAT do not, Node.js v0.10 does not\nfunction hasMillisResSync () {\n  let tmpfile = path.join('millis-test-sync' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFileSync(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141')\n  const fd = fs.openSync(tmpfile, 'r+')\n  fs.futimesSync(fd, d, d)\n  fs.closeSync(fd)\n  return fs.statSync(tmpfile).mtime > 1435410243000\n}\n\nfunction hasMillisRes (callback) {\n  let tmpfile = path.join('millis-test' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFile(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141', err => {\n    if (err) return callback(err)\n    fs.open(tmpfile, 'r+', (err, fd) => {\n      if (err) return callback(err)\n      fs.futimes(fd, d, d, err => {\n        if (err) return callback(err)\n        fs.close(fd, err => {\n          if (err) return callback(err)\n          fs.stat(tmpfile, (err, stats) => {\n            if (err) return callback(err)\n            callback(null, stats.mtime > 1435410243000)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction timeRemoveMillis (timestamp) {\n  if (typeof timestamp === 'number') {\n    return Math.floor(timestamp / 1000) * 1000\n  } else if (timestamp instanceof Date) {\n    return new Date(Math.floor(timestamp.getTime() / 1000) * 1000)\n  } else {\n    throw new Error('fs-extra: timeRemoveMillis() unknown parameter type')\n  }\n}\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  hasMillisRes,\n  hasMillisResSync,\n  timeRemoveMillis,\n  utimesMillis,\n  utimesMillisSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  copy: u(require('./copy'))\n}\n","/**\n *  Copyright (c) 2018 Red Hat, Inc. and others.\n *  All rights reserved. This program and the accompanying materials\n *  are made available under the terms of the Eclipse Public License v1.0\n *  which accompanies this distribution, and is available at\n *  http://www.eclipse.org/legal/epl-v10.html\n *\n *  Contributors:\n *  Red Hat Inc. - initial API and implementation\n *  Microsoft Corporation - Auto Closing Tags\n */\n\nimport * as os from 'os';\nimport * as path from 'path';\nimport { Command, commands, ExtensionContext, extensions, IndentAction, LanguageConfiguration, languages, Position, TextDocument, TextEditor, Uri, window, workspace } from \"vscode\";\nimport { CancellationToken, ConfigurationParams, ConfigurationRequest, DidChangeConfigurationNotification, ExecuteCommandParams, ExecuteCommandRequest, LanguageClient, LanguageClientOptions, MessageType, NotificationType, ReferencesRequest, RequestType, RevealOutputChannelOn, TextDocumentIdentifier, TextDocumentPositionParams } from 'vscode-languageclient';\nimport { Commands } from './commands';\nimport { prepareExecutable } from './javaServerStarter';\nimport { markdownPreviewProvider } from \"./markdownPreviewProvider\";\nimport { collectXmlJavaExtensions, onExtensionChange } from './plugin';\nimport * as requirements from './requirements';\nimport { getXMLConfiguration, onConfigurationChange, subscribeJDKChangeConfiguration } from './settings';\nimport { activateTagClosing, AutoCloseResult } from './tagClosing';\nimport { containsVariableReferenceToCurrentFile, getVariableSubstitutedAssociations } from './variableSubstitution';\n\nexport interface ScopeInfo {\n  scope: \"default\" | \"global\" | \"workspace\" | \"folder\";\n  configurationTarget: boolean;\n}\n\n/**\n * Interface for the FileAssociation shape.\n * @param systemId - The path to a valid XSD.\n * @param pattern - The file pattern associated with the XSD.\n *\n * @returns None\n */\nexport interface XMLFileAssociation {\n  systemId: string,\n  pattern: string;\n}\n\n/**\n * Interface for APIs exposed from the extension.\n *\n * @remarks\n * A sample code to use these APIs are as following:\n * const ext = await vscode.extensions.getExtension('redhat.vscode-xml').activate();\n * ext.addXMLCatalogs(...);\n * ext.removeXMLCatalogs(...);\n * ext.addXMLFileAssociations(...);\n * ext.removeXMLFileAssociations(...);\n */\nexport interface XMLExtensionApi {\n  /**\n   * Adds XML Catalogs in addition to the catalogs defined in the settings.json file.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * addXMLCatalogs(['path/to/catalog.xml', 'path/to/anotherCatalog.xml'])\n   * ```\n   * @param catalogs - A list of path to XML catalogs\n   * @returns None\n   */\n  addXMLCatalogs(catalogs: string[]): void;\n  /**\n   * Removes XML Catalogs from the extension.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * removeXMLCatalogs(['path/to/catalog.xml', 'path/to/anotherCatalog.xml'])\n   * ```\n   * @param catalogs - A list of path to XML catalogs\n   * @returns None\n   */\n  removeXMLCatalogs(catalogs: string[]): void;\n  /**\n   * Adds XML File Associations in addition to the catalogs defined in the settings.json file.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * addXMLFileAssociations([{\n   *    \"systemId\": \"path/to/file.xsd\",\n   *    \"pattern\": \"file1.xml\"\n   *  },{\n   *    \"systemId\": \"http://www.w3.org/2001/XMLSchema.xsd\",\n   *    \"pattern\": \"file2.xml\"\n   *  }])\n   * ```\n   * @param fileAssociations - A list of file association\n   * @returns None\n   */\n  addXMLFileAssociations(fileAssociations: XMLFileAssociation[]): void;\n  /**\n   * Removes XML File Associations from the extension.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * removeXMLFileAssociations([{\n   *    \"systemId\": \"path/to/file.xsd\",\n   *    \"pattern\": \"file1.xml\"\n   *  },{\n   *    \"systemId\": \"http://www.w3.org/2001/XMLSchema.xsd\",\n   *    \"pattern\": \"file2.xml\"\n   *  }])\n   * ```\n   * @param fileAssociations - A list of file association\n   * @returns None\n   */\n  removeXMLFileAssociations(fileAssociations: XMLFileAssociation[]): void;\n\n}\n\nnamespace ExecuteClientCommandRequest {\n  export const type: RequestType<ExecuteCommandParams, any, void, void> = new RequestType('xml/executeClientCommand')\n}\n\nnamespace TagCloseRequest {\n  export const type: RequestType<TextDocumentPositionParams, AutoCloseResult, any, any> = new RequestType('xml/closeTag');\n}\n\nnamespace SymbolsLimitExceededNotification {\n  export const type: NotificationType<{ commandId: string, message: string }, any> = new NotificationType('xml/symbolsLimitExceeded');\n}\n\ninterface ActionableMessage {\n  severity: MessageType;\n  message: string;\n  data?: any;\n  commands?: Command[];\n}\n\nnamespace ActionableNotification {\n  export const type = new NotificationType<ActionableMessage, void>('xml/actionableNotification');\n}\n\nlet languageClient: LanguageClient;\n\nexport function activate(context: ExtensionContext) {\n  // Register commands for XML documentation\n  context.subscriptions.push(markdownPreviewProvider);\n  context.subscriptions.push(commands.registerCommand(Commands.OPEN_DOCS_HOME, async () => {\n    const uri = 'README.md';\n    const title = 'XML Documentation';\n    const sectionId = '';\n    markdownPreviewProvider.show(context.asAbsolutePath(path.join('docs', uri)), title, sectionId, context);\n  }));\n  context.subscriptions.push(commands.registerCommand(Commands.OPEN_DOCS, async (params: { page: string, section: string }) => {\n    const page = params.page.endsWith('.md') ? params.page.substr(0, params.page.length - 3) : params.page;\n    const uri = page + '.md';\n    const sectionId = params.section || '';\n    const title = 'XML ' + page;\n    markdownPreviewProvider.show(context.asAbsolutePath(path.join('docs', uri)), title, sectionId, context);\n  }));\n\n  let storagePath = context.storagePath;\n  const externalXmlSettings = {\n    \"xmlCatalogs\": [],\n    \"xmlFileAssociations\": []\n  };\n\n  if (!storagePath) {\n    storagePath = os.homedir() + \"/.lemminx\";\n  }\n  let logfile = path.resolve(storagePath + '/lemminx.log');\n\n  return requirements.resolveRequirements(context).catch(error => {\n    //show error\n    window.showErrorMessage(error.message, error.label).then((selection) => {\n      if (error.label && error.label === selection && error.openUrl) {\n        commands.executeCommand('vscode.open', error.openUrl);\n      }\n    });\n    // rethrow to disrupt the chain.\n    throw error;\n  }).then(requirements => {\n\n    let clientOptions: LanguageClientOptions = {\n      // Register the server for xml and xsl\n      documentSelector: [\n        { scheme: 'file', language: 'xml' },\n        { scheme: 'file', language: 'xsl' },\n        { scheme: 'untitled', language: 'xml' },\n        { scheme: 'untitled', language: 'xsl' }\n      ],\n      revealOutputChannelOn: RevealOutputChannelOn.Never,\n      //wrap with key 'settings' so it can be handled same a DidChangeConfiguration\n      initializationOptions: {\n        settings: getXMLSettings(requirements.java_home),\n        extendedClientCapabilities: {\n          codeLens: {\n            codeLensKind: {\n              valueSet: [\n                'references'\n              ]\n            }\n          },\n          actionableNotificationSupport: true,\n          openSettingsCommandSupport: true\n        }\n      },\n      synchronize: {\n        //preferences starting with these will trigger didChangeConfiguration\n        configurationSection: ['xml', '[xml]', 'files.trimFinalNewlines', 'files.trimTrailingWhitespace', 'files.insertFinalNewline']\n      },\n      middleware: {\n        workspace: {\n          didChangeConfiguration: () => {\n            languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n            onConfigurationChange();\n          }\n        }\n      }\n    }\n\n    let serverOptions = prepareExecutable(requirements, collectXmlJavaExtensions(extensions.all, getXMLConfiguration().get(\"extension.jars\", [])), context);\n    languageClient = new LanguageClient('xml', 'XML Support', serverOptions, clientOptions);\n    let toDispose = context.subscriptions;\n    let disposable = languageClient.start();\n    toDispose.push(disposable);\n\n    languages.setLanguageConfiguration('xml', getIndentationRules());\n    languages.setLanguageConfiguration('xsl', getIndentationRules());\n\n    return languageClient.onReady().then(() => {\n      //Detect JDK configuration changes\n      disposable = subscribeJDKChangeConfiguration();\n      toDispose.push(disposable);\n\n      // Code Lens actions\n      context.subscriptions.push(commands.registerCommand(Commands.SHOW_REFERENCES, (uriString: string, position: Position) => {\n        const uri = Uri.parse(uriString);\n        workspace.openTextDocument(uri).then(document => {\n          // Consume references service from the XML Language Server\n          let param = languageClient.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n          languageClient.sendRequest(ReferencesRequest.type, param).then(locations => {\n            commands.executeCommand(Commands.EDITOR_SHOW_REFERENCES, uri, languageClient.protocol2CodeConverter.asPosition(position), locations.map(languageClient.protocol2CodeConverter.asLocation));\n          })\n        })\n      }));\n\n      setupActionableNotificationListener(languageClient);\n\n      // Handler for 'xml/executeClientCommand` request message that executes a command on the client\n      languageClient.onRequest(ExecuteClientCommandRequest.type, async (params: ExecuteCommandParams) => {\n        return await commands.executeCommand(params.command, ...params.arguments);\n      });\n\n      // Register custom XML commands\n      context.subscriptions.push(commands.registerCommand(Commands.VALIDATE_CURRENT_FILE, async (params) => {\n        const uri = window.activeTextEditor.document.uri;\n        const identifier = TextDocumentIdentifier.create(uri.toString());\n        commands.executeCommand(Commands.EXECUTE_WORKSPACE_COMMAND, Commands.VALIDATE_CURRENT_FILE, identifier).\n          then(() => {\n            window.showInformationMessage('The current XML file was successfully validated.');\n          }, error => {\n            window.showErrorMessage('Error during XML validation ' + error.message);\n          });\n      }));\n      context.subscriptions.push(commands.registerCommand(Commands.VALIDATE_ALL_FILES, async () => {\n        commands.executeCommand(Commands.EXECUTE_WORKSPACE_COMMAND, Commands.VALIDATE_ALL_FILES).\n          then(() => {\n            window.showInformationMessage('All open XML files were successfully validated.');\n          }, error => {\n            window.showErrorMessage('Error during XML validation: ' + error.message);\n          });\n      }));\n\n      // Register client command to execute custom XML Language Server command\n      context.subscriptions.push(commands.registerCommand(Commands.EXECUTE_WORKSPACE_COMMAND, (command, ...rest) => {\n        let token: CancellationToken;\n        let commandArgs: any[] = rest;\n        if (rest && rest.length && CancellationToken.is(rest[rest.length - 1])) {\n          token = rest[rest.length - 1];\n          commandArgs = rest.slice(0, rest.length - 1);\n        }\n        const params: ExecuteCommandParams = {\n          command,\n          arguments: commandArgs\n        };\n        if (token) {\n          return languageClient.sendRequest(ExecuteCommandRequest.type, params, token);\n        } else {\n          return languageClient.sendRequest(ExecuteCommandRequest.type, params);\n        }\n      }));\n\n      context.subscriptions.push(commands.registerCommand(Commands.OPEN_SETTINGS, async (settingId?: string) => {\n        commands.executeCommand('workbench.action.openSettings', settingId);\n      }));\n\n\n      // Setup autoCloseTags\n      const tagProvider = (document: TextDocument, position: Position) => {\n        let param = languageClient.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n        let text = languageClient.sendRequest(TagCloseRequest.type, param);\n        return text;\n      };\n      context.subscriptions.push(activateTagClosing(tagProvider, { xml: true, xsl: true }, Commands.AUTO_CLOSE_TAGS));\n\n      if (extensions.onDidChange) {// Theia doesn't support this API yet\n        context.subscriptions.push(extensions.onDidChange(() => {\n          onExtensionChange(extensions.all, getXMLConfiguration().get(\"extension.jars\", []));\n        }));\n      }\n\n      // Copied from:\n      // https://github.com/redhat-developer/vscode-java/pull/1081/files\n      languageClient.onRequest(ConfigurationRequest.type, (params: ConfigurationParams) => {\n        const result: any[] = [];\n        const activeEditor: TextEditor | undefined = window.activeTextEditor;\n        for (const item of params.items) {\n          if (activeEditor && activeEditor.document.uri.toString() === Uri.parse(item.scopeUri).toString()) {\n            if (item.section === \"xml.format.insertSpaces\") {\n              result.push(activeEditor.options.insertSpaces);\n            } else if (item.section === \"xml.format.tabSize\") {\n              result.push(activeEditor.options.tabSize);\n            }\n          } else {\n            result.push(workspace.getConfiguration(null, Uri.parse(item.scopeUri)).get(item.section));\n          }\n        }\n        return result;\n      });\n      // When the current document changes, update variable values that refer to the current file if these variables are referenced,\n      // and send the updated settings to the server\n      context.subscriptions.push(window.onDidChangeActiveTextEditor(() => {\n        if (containsVariableReferenceToCurrentFile(getXMLConfiguration().get('fileAssociations') as XMLFileAssociation[])) {\n          languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n          onConfigurationChange();\n        }\n      }));\n\n      const api: XMLExtensionApi = {\n        // add API set catalogs to internal memory\n        addXMLCatalogs: (catalogs: string[]) => {\n          const externalXmlCatalogs = externalXmlSettings.xmlCatalogs;\n          catalogs.forEach(element => {\n            if (!externalXmlCatalogs.includes(element)) {\n              externalXmlCatalogs.push(element);\n            }\n          });\n          languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n          onConfigurationChange();\n        },\n        // remove API set catalogs to internal memory\n        removeXMLCatalogs: (catalogs: string[]) => {\n          catalogs.forEach(element => {\n            const externalXmlCatalogs = externalXmlSettings.xmlCatalogs;\n            if (externalXmlCatalogs.includes(element)) {\n              const itemIndex = externalXmlCatalogs.indexOf(element);\n              externalXmlCatalogs.splice(itemIndex, 1);\n            }\n          });\n          languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n          onConfigurationChange();\n        },\n        // add API set fileAssociations to internal memory\n        addXMLFileAssociations: (fileAssociations: XMLFileAssociation[]) => {\n          const externalfileAssociations = externalXmlSettings.xmlFileAssociations;\n          fileAssociations.forEach(element => {\n            if (!externalfileAssociations.some(fileAssociation => fileAssociation.systemId === element.systemId)) {\n              externalfileAssociations.push(element);\n            }\n          });\n          languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n          onConfigurationChange();\n        },\n        // remove API set fileAssociations to internal memory\n        removeXMLFileAssociations: (fileAssociations: XMLFileAssociation[]) => {\n          const externalfileAssociations = externalXmlSettings.xmlFileAssociations;\n          fileAssociations.forEach(element => {\n            const itemIndex = externalfileAssociations.findIndex(fileAssociation => fileAssociation.systemId === element.systemId) //returns -1 if item not found\n            if (itemIndex > -1) {\n              externalfileAssociations.splice(itemIndex, 1);\n            }\n          });\n          languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n          onConfigurationChange();\n        }\n      };\n      return api;\n    });\n  });\n\n  /**\n   * Returns a json object with key 'xml' and a json object value that\n   * holds all xml. settings.\n   *\n   * Returns: {\n   *            'xml': {...}\n   *          }\n   */\n  function getXMLSettings(javaHome: string): JSON {\n    let configXML = workspace.getConfiguration().get('xml');\n    let xml;\n    if (!configXML) { //Set default preferences if not provided\n      const defaultValue =\n      {\n        xml: {\n          trace: {\n            server: 'verbose'\n          },\n          logs: {\n            client: true\n          },\n          format: {\n            enabled: true,\n            splitAttributes: false\n          },\n          completion: {\n            autoCloseTags: false\n          }\n        }\n      }\n      xml = defaultValue;\n    } else {\n      let x = JSON.stringify(configXML); //configXML is not a JSON type\n      xml = { \"xml\": JSON.parse(x) };\n    }\n    xml['xml']['logs']['file'] = logfile;\n    xml['xml']['useCache'] = true;\n    xml['xml']['java']['home'] = javaHome;\n    xml['xml']['format']['trimFinalNewlines'] = workspace.getConfiguration('files').get('trimFinalNewlines', true);\n    xml['xml']['format']['trimTrailingWhitespace'] = workspace.getConfiguration('files').get('trimTrailingWhitespace', false);\n    xml['xml']['format']['insertFinalNewline'] = workspace.getConfiguration('files').get('insertFinalNewline', false);\n\n    //applying externalXmlSettings to the xmlSettings\n    externalXmlSettings.xmlCatalogs.forEach(catalog => {\n      if (!xml['xml']['catalogs'].includes(catalog)) {\n        xml['xml']['catalogs'].push(catalog);\n      }\n    })\n    // Apply variable substitutions for file associations\n    xml['xml']['fileAssociations'] = [...getVariableSubstitutedAssociations(xml['xml']['fileAssociations'])];\n\n    return xml;\n  }\n}\n\nexport function deactivate(): void {\n  languageClient.stop();\n}\n\nfunction getIndentationRules(): LanguageConfiguration {\n  return {\n\n    // indentationRules referenced from:\n    // https://github.com/microsoft/vscode/blob/d00558037359acceea329e718036c19625f91a1a/extensions/html-language-features/client/src/htmlMain.ts#L114-L115\n    indentationRules: {\n      increaseIndentPattern: /<(?!\\?|[^>]*\\/>)([-_\\.A-Za-z0-9]+)(?=\\s|>)\\b[^>]*>(?!.*<\\/\\1>)|<!--(?!.*-->)|\\{[^}\"']*$/,\n      decreaseIndentPattern: /^\\s*(<\\/[-_\\.A-Za-z0-9]+\\b[^>]*>|-->|\\})/\n    },\n    onEnterRules: [\n      {\n        beforeText: new RegExp(`<([_:\\\\w][_:\\\\w-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n        afterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>/i,\n        action: { indentAction: IndentAction.IndentOutdent }\n      },\n      {\n        beforeText: new RegExp(`<(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n        action: { indentAction: IndentAction.Indent }\n      }\n    ]\n  };\n}\n\nfunction setupActionableNotificationListener(languageClient: LanguageClient): void {\n  languageClient.onNotification(ActionableNotification.type, (notification: ActionableMessage) => {\n    let show = null;\n    switch (notification.severity) {\n      case MessageType.Info:\n        show = window.showInformationMessage;\n        break;\n      case MessageType.Warning:\n        show = window.showWarningMessage;\n        break;\n      case MessageType.Error:\n        show = window.showErrorMessage;\n        break;\n    }\n    if (!show) {\n      return;\n    }\n    const titles: string[] = notification.commands.map(a => a.title);\n    show(notification.message, ...titles).then((selection) => {\n      for (const action of notification.commands) {\n        if (action.title === selection) {\n          const args: any[] = (action.arguments) ? action.arguments : [];\n          commands.executeCommand(action.command, ...args);\n          break;\n        }\n      }\n    });\n  });\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.30'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env) {\r\n            if (!env) {\r\n                return process.env;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            Object.keys(env).forEach(key => result[key] = env[key]);\r\n            return result;\r\n        }\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\r\n            }\r\n            ;\r\n            return false;\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            // We are under debugging. So use debug as well.\r\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport == TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(_client) {\r\n        let result = [];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = options.loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, options);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, options) {\n  var v = parse(version, options);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, options);\n\n  debug('SemVer', version, options);\n  this.options = options;\n  this.loose = !!options.loose;\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.options, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, options);\n\n  debug('comparator', comp, options);\n  this.options = options;\n  this.loose = !!options.loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.options.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.options.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.options);\n\n  return cmp(version, this.operator, this.semver, this.options);\n};\n\nComparator.prototype.intersects = function(comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options);\n    return satisfies(this.value, rangeTmp, options);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options);\n    return satisfies(comp.semver, rangeTmp, options);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range;\n    } else {\n      return new Range(range.raw, options);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, options);\n\n  this.options = options;\n  this.loose = !!options.loose;\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.options.loose;\n  range = range.trim();\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, this.options);\n  }, this).join(' ').split(/\\s+/);\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, this.options);\n  }, this);\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, options) {\n  return new Range(range, options).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, options) {\n  debug('comp', comp, options);\n  comp = replaceCarets(comp, options);\n  debug('caret', comp);\n  comp = replaceTildes(comp, options);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, options);\n  debug('xrange', comp);\n  comp = replaceStars(comp, options);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, options) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, options);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, options) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, options);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, options) {\n  debug('caret', comp, options);\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, options) {\n  debug('replaceXRanges', comp, options);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, options);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, options) {\n  comp = comp.trim();\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, options) {\n  debug('replaceStars', comp, options);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.options);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (!options)\n    options = {}\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, options) {\n  try {\n    range = new Range(range, options);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, options) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, options);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, options);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, options) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, options);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, options);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, options) {\n  return outside(version, range, '<', options);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, options) {\n  return outside(version, range, '>', options);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, options) {\n  version = new SemVer(version, options);\n  range = new Range(range, options);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, options) {\n  var parsed = parse(version, options);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","module.exports = require(\"crypto\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), Is.string(context.only) ? [context.only] : undefined);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set('', code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.colorProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.colorProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index));\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.implementationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.implementationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.implementationProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.typeDefinitionProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.typeDefinitionProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.typeDefinitionProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.foldingRangeProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.foldingRangeProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.declarationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.declarationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const declCapabilities = capabilities.declarationProvider;\r\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\r\n            const selector = declCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","import { workspace, ExtensionContext } from 'vscode'\nimport { Executable, ExecutableOptions } from 'vscode-languageclient';\nimport { RequirementsData } from './requirements';\nimport * as os from 'os';\nimport * as path from 'path';\nimport { xmlServerVmargs, getJavaagentFlag, getKey, IS_WORKSPACE_VMARGS_XML_ALLOWED, getXMLConfiguration } from './settings';\nconst glob = require('glob');\n\ndeclare var v8debug;\n\nconst DEBUG = (typeof v8debug === 'object') || startedInDebugMode();\n\nexport function prepareExecutable(requirements: RequirementsData, xmlJavaExtensions: string[], context: ExtensionContext): Executable {\n  let executable: Executable = Object.create(null);\n  let options: ExecutableOptions = Object.create(null);\n  options.env = process.env;\n  options.stdio = 'pipe';\n  executable.options = options;\n  executable.command = path.resolve(requirements.java_home + '/bin/java');\n  executable.args = prepareParams(requirements, xmlJavaExtensions, context);\n  return executable;\n}\n\nfunction prepareParams(requirements: RequirementsData, xmlJavaExtensions: string[], context: ExtensionContext): string[] {\n  let params: string[] = [];\n  if (DEBUG) {\n    if (process.env['SUSPEND_SERVER'] === 'true') {\n      params.push('-agentlib:jdwp=transport=dt_socket,server=y,address=1054');\n    } else {\n      params.push('-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1054,quiet=y');\n    }\n  }\n  let vmargsCheck = workspace.getConfiguration().inspect(xmlServerVmargs).workspaceValue;\n  if (vmargsCheck !== undefined) {\n    const agentFlag = getJavaagentFlag(vmargsCheck);\n    if (agentFlag !== null) {\n      const keyVmargs = getKey(IS_WORKSPACE_VMARGS_XML_ALLOWED, context.storagePath, vmargsCheck);\n      const key = context.globalState.get(keyVmargs);\n      if (key !== true) {\n        vmargsCheck = workspace.getConfiguration().inspect(xmlServerVmargs).globalValue;\n      }\n    }\n  } else {\n    vmargsCheck = getXMLConfiguration().get('server.vmargs');\n  }\n  let vmargs;\n  if (vmargsCheck !== undefined) {\n    vmargs = vmargsCheck + '';\n  } else {\n    vmargs = '';\n  }\n  if (os.platform() == 'win32') {\n    const watchParentProcess = '-DwatchParentProcess=';\n    if (vmargs.indexOf(watchParentProcess) < 0) {\n      params.push(watchParentProcess + 'false');\n    }\n  }\n  // \"OpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify\n  // were deprecated in JDK 13 and will likely be removed in a future release.\"\n  // so only add -noverify for older versions\n  if (params.indexOf('-noverify') < 0 && params.indexOf('-Xverify:none') < 0 && requirements.java_version < 13) {\n    params.push('-noverify');\n  }\n  parseVMargs(params, vmargs);\n  let server_home: string = path.resolve(__dirname, '../server');\n  let launchersFound: Array<string> = glob.sync('**/org.eclipse.lemminx*-uber.jar', { cwd: server_home });\n  if (launchersFound.length) {\n    let xmlJavaExtensionsClasspath = '';\n    if (xmlJavaExtensions.length > 0) {\n      const pathSeparator = os.platform() == 'win32' ? ';' : ':';\n      xmlJavaExtensionsClasspath = pathSeparator + xmlJavaExtensions.join(pathSeparator);\n    }    \n    params.push('-cp'); params.push(path.resolve(server_home, launchersFound[0]) + xmlJavaExtensionsClasspath);\n    params.push('org.eclipse.lemminx.XMLServerLauncher');\n  } else {\n    return null;\n  }\n  return params;\n}\n\nfunction startedInDebugMode(): boolean {\n  const args = (process as any).execArgv as string[];\n  return hasDebugFlag(args);\n}\n\nfunction hasDebugFlag(args: string[]): boolean {\n  if (args) {\n    // See https://nodejs.org/en/docs/guides/debugging-getting-started/\n    return args.some( arg => /^--inspect/.test(arg) || /^--debug/.test(arg));\n  }\n  return false;\n}\n\n//exported for tests\nexport function parseVMargs(params: any[], vmargsLine: string) {\n  if (!vmargsLine) {\n    return;\n  }\n  let vmargs = vmargsLine.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n  if (vmargs === null) {\n    return;\n  }\n  vmargs.forEach(arg => {\n    //remove all standalone double quotes\n    arg = arg.replace(/(\\\\)?\"/g, function ($0, $1) { return ($1 ? $0 : ''); });\n    //unescape all escaped double quotes\n    arg = arg.replace(/(\\\\)\"/g, '\"');\n    if (params.indexOf(arg) < 0) {\n      params.push(arg);\n    }\n  });\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","try {\n  var util = require('util');\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = require(\"events\");","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","import { Disposable, WebviewPanel, window, ViewColumn, commands, Uri, Webview, ExtensionContext, env } from \"vscode\";\r\nimport * as fse from 'fs-extra';\r\nimport * as path from 'path';\r\nimport { Commands } from \"./commands\";\r\n\r\nclass MarkdownPreviewProvider implements Disposable {\r\n    private panel: WebviewPanel | undefined;\r\n    // a cache maps document path to rendered html\r\n    private documentCache: Map<string, string> = new Map<string, string>();\r\n    private disposables: Disposable[] = [];\r\n\r\n    public async show(markdownFilePath: string, title: string, section: string, context: ExtensionContext): Promise<void> {\r\n        if (!this.panel) {\r\n            this.panel = window.createWebviewPanel('xml.markdownPreview', title, ViewColumn.Active, {\r\n                localResourceRoots: [\r\n                    Uri.file(path.join(context.extensionPath, 'webview-resources')),\r\n                    Uri.file(path.dirname(markdownFilePath)),\r\n                ],\r\n                retainContextWhenHidden: true,\r\n                enableFindWidget: true,\r\n                enableScripts: true,\r\n                enableCommandUris: true\r\n            });\r\n        }\r\n\r\n        this.disposables.push(this.panel.onDidDispose(() => {\r\n            this.panel = undefined;\r\n        }));\r\n\r\n        this.panel.iconPath = Uri.file(path.join(context.extensionPath, 'icons', 'icon128.png'));\r\n        this.panel.webview.html = await this.getHtmlContent(this.panel.webview, markdownFilePath, section, context);\r\n        this.panel.title = title;\r\n        this.panel.reveal(this.panel.viewColumn);\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.panel) {\r\n            this.panel.dispose();\r\n        }\r\n        for (const disposable of this.disposables) {\r\n            disposable.dispose();\r\n        }\r\n    }\r\n\r\n    protected async getHtmlContent(webview: Webview, markdownFilePath: string, section: string, context: ExtensionContext): Promise<string> {\r\n        const nonce: string = this.getNonce();\r\n        const styles: string = this.getStyles(webview, context);\r\n        let body: string | undefined = this.documentCache.get(markdownFilePath);\r\n        if (!body) {\r\n            let markdownString: string = await fse.readFile(markdownFilePath, 'utf8');\r\n            markdownString = markdownString.replace(/__VSCODE_ENV_APPNAME_PLACEHOLDER__/, env.appName);\r\n            // HACK: This will not replace cross-page links if they don't have a section\r\n            // i.e. [here](OtherPage#section) gets replaced, but [here](OtherPage) doesn't\r\n            // Captures markdown links like this: [$1]($2#$3)\r\n            // where $1, $2, $3 are non empty strings that are then passed to the replace function\r\n            markdownString = markdownString.replace(/\\[([^\\]]+)\\]\\(([^#\\)]+)#([^)]*)\\)/g,\r\n                    (_match: string, linkText: string, page: string, section: string) => {\r\n                return `<a href=\"command:xml.open.docs?%5B%7B%22page%22%3A%22${page}%22%2C%22section%22%3A%22${section}%22%7D%5D\">${linkText}</a>`\r\n            });\r\n            body = await commands.executeCommand(Commands.MARKDOWN_API_RENDER, markdownString);\r\n            this.documentCache.set(markdownFilePath, body);\r\n        }\r\n        return `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource}; img-src 'self' ${webview.cspSource} https: data:; script-src 'nonce-${nonce}';\"/>\r\n                <meta charset=\"UTF-8\">\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                ${styles}\r\n                <base href=\"${webview.asWebviewUri(Uri.file(markdownFilePath))}\">\r\n            </head>\r\n            <body class=\"vscode-body scrollBeyondLastLine wordWrap showEditorSelection\">\r\n                ${body}\r\n                <button class=\"btn floating-bottom-right\" id=\"back-to-top-btn\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 6.04042L3.02022 11.0202L2.31311 10.3131L7.64644 4.97976L8.35355 4.97976L13.6869 10.3131L12.9798 11.0202L8 6.04042Z\"/>\r\n                    </svg>\r\n                </button>\r\n                <script nonce=\"${nonce}\">\r\n                    (function() {\r\n                        var element = document.querySelector('[id^=\"${section}\"]');\r\n                        if (element) {\r\n                            element.scrollIntoView(true);\r\n                        }\r\n                        var backToTopBtn = document.getElementById('back-to-top-btn');\r\n                        if (backToTopBtn) {\r\n                            backToTopBtn.onclick = () => document.documentElement.scrollTop = 0;\r\n                        }\r\n                    })();\r\n                </script>\r\n            </body>\r\n            </html>\r\n        `;\r\n    }\r\n\r\n    protected getStyles(webview: Webview, context: ExtensionContext): string {\r\n        const styles: Uri[] = [\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'highlight.css')),\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'markdown.css')),\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'document.css')),\r\n        ];\r\n        return styles.map((styleUri: Uri) => `<link rel=\"stylesheet\" type=\"text/css\" href=\"${webview.asWebviewUri(styleUri).toString()}\">`).join('\\n');\r\n    }\r\n\r\n    private getNonce(): string {\r\n        let text = \"\";\r\n        const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        for (let i = 0; i < 32; i++) {\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        }\r\n        return text;\r\n    }\r\n}\r\n\r\nexport const markdownPreviewProvider: MarkdownPreviewProvider = new MarkdownPreviewProvider();","'use strict'\n\nmodule.exports = Object.assign(\n  {},\n  // Export promiseified graceful-fs:\n  require('./fs'),\n  // Export extra methods:\n  require('./copy-sync'),\n  require('./copy'),\n  require('./empty'),\n  require('./ensure'),\n  require('./json'),\n  require('./mkdirs'),\n  require('./move-sync'),\n  require('./move'),\n  require('./output'),\n  require('./path-exists'),\n  require('./remove')\n)\n\n// Export fs.promises as a getter property so that we don't trigger\n// ExperimentalWarning before fs.promises is actually accessed.\nconst fs = require('fs')\nif (Object.getOwnPropertyDescriptor(fs, 'promises')) {\n  Object.defineProperty(module.exports, 'promises', {\n    get () { return fs.promises }\n  })\n}\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    read.__proto__ = fs$read\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirpSync = require('../mkdirs').mkdirsSync\nconst utimesSync = require('../util/utimes.js').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy')\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  return handleFilterAndCopy(destStat, src, dest, opts)\n}\n\nfunction handleFilterAndCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirpSync(destParent)\n  return startCopy(destStat, src, dest, opts)\n}\n\nfunction startCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  if (typeof fs.copyFileSync === 'function') {\n    fs.copyFileSync(src, dest)\n    fs.chmodSync(dest, srcStat.mode)\n    if (opts.preserveTimestamps) {\n      return utimesSync(dest, srcStat.atime, srcStat.mtime)\n    }\n    return\n  }\n  return copyFileFallback(srcStat, src, dest, opts)\n}\n\nfunction copyFileFallback (srcStat, src, dest, opts) {\n  const BUF_LENGTH = 64 * 1024\n  const _buff = require('../util/buffer')(BUF_LENGTH)\n\n  const fdr = fs.openSync(src, 'r')\n  const fdw = fs.openSync(dest, 'w', srcStat.mode)\n  let pos = 0\n\n  while (pos < srcStat.size) {\n    const bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)\n    fs.writeSync(fdw, _buff, 0, bytesRead)\n    pos += bytesRead\n  }\n\n  if (opts.preserveTimestamps) fs.futimesSync(fdw, srcStat.atime, srcStat.mtime)\n\n  fs.closeSync(fdr)\n  fs.closeSync(fdw)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat, src, dest, opts)\n  if (destStat && !destStat.isDirectory()) {\n    throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n  }\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcStat, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return fs.chmodSync(dest, srcStat.mode)\n}\n\nfunction copyDir (src, dest, opts) {\n  fs.readdirSync(src).forEach(item => copyDirItem(item, src, dest, opts))\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy')\n  return startCopy(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // prevent copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (fs.statSync(dest).isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirs (p, opts, callback, made) {\n  if (typeof opts === 'function') {\n    callback = opts\n    opts = {}\n  } else if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    return callback(errInval)\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  callback = callback || function () {}\n  p = path.resolve(p)\n\n  xfs.mkdir(p, mode, er => {\n    if (!er) {\n      made = made || p\n      return callback(null, made)\n    }\n    switch (er.code) {\n      case 'ENOENT':\n        if (path.dirname(p) === p) return callback(er)\n        mkdirs(path.dirname(p), opts, (er, made) => {\n          if (er) callback(er, made)\n          else mkdirs(p, opts, callback, made)\n        })\n        break\n\n      // In the case of any other error, just see if there's a dir\n      // there already.  If so, then hooray!  If not, then something\n      // is borked.\n      default:\n        xfs.stat(p, (er2, stat) => {\n          // if the stat fails, then that's super weird.\n          // let the original error be the failure reason.\n          if (er2 || !stat.isDirectory()) callback(er, made)\n          else callback(null, made)\n        })\n        break\n    }\n  })\n}\n\nmodule.exports = mkdirs\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirsSync (p, opts, made) {\n  if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    throw errInval\n  }\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  p = path.resolve(p)\n\n  try {\n    xfs.mkdirSync(p, mode)\n    made = made || p\n  } catch (err0) {\n    if (err0.code === 'ENOENT') {\n      if (path.dirname(p) === p) throw err0\n      made = mkdirsSync(path.dirname(p), opts, made)\n      mkdirsSync(p, opts, made)\n    } else {\n      // In the case of any other error, just see if there's a dir there\n      // already. If so, then hooray!  If not, then something is borked.\n      let stat\n      try {\n        stat = xfs.statSync(p)\n      } catch (err1) {\n        throw err0\n      }\n      if (!stat.isDirectory()) throw err0\n    }\n  }\n\n  return made\n}\n\nmodule.exports = mkdirsSync\n","'use strict'\n/* eslint-disable node/no-deprecated-api */\nmodule.exports = function (size) {\n  if (typeof Buffer.allocUnsafe === 'function') {\n    try {\n      return Buffer.allocUnsafe(size)\n    } catch (e) {\n      return new Buffer(size)\n    }\n  }\n  return new Buffer(size)\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirp = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimes = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  stat.checkPaths(src, dest, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return startCopy(destStat, src, dest, opts, cb)\n    mkdirp(destParent, err => {\n      if (err) return cb(err)\n      return startCopy(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  if (typeof fs.copyFile === 'function') {\n    return fs.copyFile(src, dest, err => {\n      if (err) return cb(err)\n      return setDestModeAndTimestamps(srcStat, dest, opts, cb)\n    })\n  }\n  return copyFileFallback(srcStat, src, dest, opts, cb)\n}\n\nfunction copyFileFallback (srcStat, src, dest, opts, cb) {\n  const rs = fs.createReadStream(src)\n  rs.on('error', err => cb(err)).once('open', () => {\n    const ws = fs.createWriteStream(dest, { mode: srcStat.mode })\n    ws.on('error', err => cb(err))\n      .on('open', () => rs.pipe(ws))\n      .once('close', () => setDestModeAndTimestamps(srcStat, dest, opts, cb))\n  })\n}\n\nfunction setDestModeAndTimestamps (srcStat, dest, opts, cb) {\n  fs.chmod(dest, srcStat.mode, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) {\n      return utimes(dest, srcStat.atime, srcStat.mtime, cb)\n    }\n    return cb()\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat, src, dest, opts, cb)\n  if (destStat && !destStat.isDirectory()) {\n    return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n  }\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcStat, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return fs.chmod(dest, srcStat.mode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(function emptyDir (dir, callback) {\n  callback = callback || function () {}\n  fs.readdir(dir, (err, items) => {\n    if (err) return mkdir.mkdirs(dir, callback)\n\n    items = items.map(item => path.join(dir, item))\n\n    deleteItem()\n\n    function deleteItem () {\n      const item = items.pop()\n      if (!item) return callback()\n      remove.remove(item, err => {\n        if (err) return callback(err)\n        deleteItem()\n      })\n    }\n  })\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch (err) {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst assert = require('assert')\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert.strictEqual(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        const time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  if (isWindows) {\n    // We only end up here once we got ENOTEMPTY at least once, and\n    // at this point, we are guaranteed to have removed all the kids.\n    // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n    // try really hard to delete stuff on windows, because it has a\n    // PROFOUNDLY annoying habit of not closing handles promptly when\n    // files are deleted, resulting in spurious ENOTEMPTY errors.\n    const startTime = Date.now()\n    do {\n      try {\n        const ret = options.rmdirSync(p, options)\n        return ret\n      } catch (er) { }\n    } while (Date.now() - startTime < 500) // give up after 500ms\n  } else {\n    const ret = options.rmdirSync(p, options)\n    return ret\n  }\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict'\n\nconst file = require('./file')\nconst link = require('./link')\nconst symlink = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile: file.createFile,\n  createFileSync: file.createFileSync,\n  ensureFile: file.createFile,\n  ensureFileSync: file.createFileSync,\n  // link\n  createLink: link.createLink,\n  createLinkSync: link.createLinkSync,\n  ensureLink: link.createLink,\n  ensureLinkSync: link.createLinkSync,\n  // symlink\n  createSymlink: symlink.createSymlink,\n  createSymlinkSync: symlink.createSymlinkSync,\n  ensureSymlink: symlink.createSymlink,\n  ensureSymlinkSync: symlink.createSymlinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    pathExists(dir, (err, dirExists) => {\n      if (err) return callback(err)\n      if (dirExists) return makeFile()\n      mkdir.mkdirs(dir, err => {\n        if (err) return callback(err)\n        makeFile()\n      })\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch (e) {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  try {\n    fs.lstatSync(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst _mkdirs = require('../mkdirs')\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = require('./symlink-paths')\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = require('./symlink-type')\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = require('../path-exists').pathExists\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    symlinkPaths(srcpath, dstpath, (err, relative) => {\n      if (err) return callback(err)\n      srcpath = relative.toDst\n      symlinkType(relative.toCwd, type, (err, type) => {\n        if (err) return callback(err)\n        const dir = path.dirname(dstpath)\n        pathExists(dir, (err, dirExists) => {\n          if (err) return callback(err)\n          if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n          mkdirs(dir, err => {\n            if (err) return callback(err)\n            fs.symlink(srcpath, dstpath, type, callback)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n","'use strict'\n\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst pathExists = require('../path-exists').pathExists\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        'toCwd': srcpath,\n        'toDst': srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          'toCwd': relativeToDst,\n          'toDst': srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            'toCwd': srcpath,\n            'toDst': path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      'toCwd': srcpath,\n      'toDst': srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        'toCwd': relativeToDst,\n        'toDst': srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        'toCwd': srcpath,\n        'toDst': path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch (e) {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n","var _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\n\nfunction readFile (file, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  fs.readFile(file, options, function (err, data) {\n    if (err) return callback(err)\n\n    data = stripBom(data)\n\n    var obj\n    try {\n      obj = JSON.parse(data, options ? options.reviver : null)\n    } catch (err2) {\n      if (shouldThrow) {\n        err2.message = file + ': ' + err2.message\n        return callback(err2)\n      } else {\n        return callback(null, null)\n      }\n    }\n\n    callback(null, obj)\n  })\n}\n\nfunction readFileSync (file, options) {\n  options = options || {}\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  try {\n    var content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = file + ': ' + err.message\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nfunction stringify (obj, options) {\n  var spaces\n  var EOL = '\\n'\n  if (typeof options === 'object' && options !== null) {\n    if (options.spaces) {\n      spaces = options.spaces\n    }\n    if (options.EOL) {\n      EOL = options.EOL\n    }\n  }\n\n  var str = JSON.stringify(obj, options ? options.replacer : null, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOL\n}\n\nfunction writeFile (file, obj, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = ''\n  try {\n    str = stringify(obj, options)\n  } catch (err) {\n    // Need to return whether a callback was passed or not\n    if (callback) callback(err, null)\n    return\n  }\n\n  fs.writeFile(file, str, options, callback)\n}\n\nfunction writeFileSync (file, obj, options) {\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  content = content.replace(/^\\uFEFF/, '')\n  return content\n}\n\nvar jsonfile = {\n  readFile: readFile,\n  readFileSync: readFileSync,\n  writeFile: writeFile,\n  writeFileSync: writeFileSync\n}\n\nmodule.exports = jsonfile\n","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar queue = []\n\nvar util = require('util')\n\nfunction noop () {}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\nif (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n  process.on('exit', function() {\n    debug(queue)\n    require('assert').equal(queue.length, 0)\n  })\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\n// Always patch fs.close/closeSync, because we want to\n// retry() whenever a close happens *anywhere* in the program.\n// This is essential when multiple graceful-fs instances are\n// in play at the same time.\nmodule.exports.close = (function (fs$close) { return function (fd, cb) {\n  return fs$close.call(fs, fd, function (err) {\n    if (!err)\n      retry()\n\n    if (typeof cb === 'function')\n      cb.apply(this, arguments)\n  })\n}})(fs.close)\n\nmodule.exports.closeSync = (function (fs$closeSync) { return function (fd) {\n  // Note that graceful-fs also retries when fs.closeSync() fails.\n  // Looks like a bug to me, although it's probably a harmless one.\n  var rval = fs$closeSync.apply(fs, arguments)\n  retry()\n  return rval\n}})(fs.closeSync)\n\n// Only patch fs once, otherwise we'll run into a memory leak if\n// graceful-fs is loaded multiple times, such as in test environments that\n// reset the loaded modules between tests.\n// We look for the string `graceful-fs` from the comment above. This\n// way we are not adding any extra properties and it will detect if older\n// versions of graceful-fs are installed.\nif (!/\\bgraceful-fs\\b/.test(fs.closeSync.toString())) {\n  fs.closeSync = module.exports.closeSync;\n  fs.close = module.exports.close;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n  fs.FileReadStream = ReadStream;  // Legacy name.\n  fs.FileWriteStream = WriteStream;  // Legacy name.\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  fs.ReadStream = ReadStream\n  fs.WriteStream = WriteStream\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  queue.push(elem)\n}\n\nfunction retry () {\n  var elem = queue.shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) { return function (fd, buffer, offset, length, position, callback_) {\n    var callback\n    if (callback_ && typeof callback_ === 'function') {\n      var eagCounter = 0\n      callback = function (er, _, __) {\n        if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n        }\n        callback_.apply(this, arguments)\n      }\n    }\n    return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n  }})(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, cb) {\n      return orig.call(fs, target, function (er, stats) {\n        if (!stats) return cb.apply(this, arguments)\n        if (stats.uid < 0) stats.uid += 0x100000000\n        if (stats.gid < 0) stats.gid += 0x100000000\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target) {\n      var stats = orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\nconst jsonFile = require('./jsonfile')\n\nfunction outputJson (file, data, options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  const dir = path.dirname(file)\n\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return jsonFile.writeJson(file, data, options, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n      jsonFile.writeJson(file, data, options, callback)\n    })\n  })\n}\n\nmodule.exports = outputJson\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst jsonFile = require('./jsonfile')\n\nfunction outputJsonSync (file, data, options) {\n  const dir = path.dirname(file)\n\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  jsonFile.writeJsonSync(file, data, options)\n}\n\nmodule.exports = outputJsonSync\n","'use strict'\n\nmodule.exports = {\n  moveSync: require('./move-sync')\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy-sync').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat } = stat.checkPathsSync(src, dest, 'move')\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite)\n}\n\nfunction doRename (src, dest, overwrite) {\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  move: u(require('./move'))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copy = require('../copy').copy\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirp\nconst pathExists = require('../path-exists').pathExists\nconst stat = require('../util/stat')\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, cb)\n      })\n    })\n  })\n}\n\nfunction doRename (src, dest, overwrite, cb) {\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync(file, ...args)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n","'use strict';\r\n\r\nimport * as vscode from 'vscode';\r\nimport * as path from 'path';\r\nimport { Commands } from './commands';\r\nconst glob = require('glob');\r\n\r\nlet existingExtensions: Array<string>;\r\n\r\nexport function collectXmlJavaExtensions(extensions: readonly vscode.Extension<any>[], jars: string[]): string[] {\r\n\tconst result = [];\r\n\tif (extensions && extensions.length) {\r\n\t\tfor (const extension of extensions) {\r\n\t\t\tconst contributesSection = extension.packageJSON['contributes'];\r\n\t\t\tif (contributesSection) {\r\n\t\t\t\tconst xmlJavaExtensions = contributesSection['xml.javaExtensions'];\r\n\t\t\t\tif (Array.isArray(xmlJavaExtensions) && xmlJavaExtensions.length) {\r\n\t\t\t\t\tfor (const xmLJavaExtensionPath of xmlJavaExtensions) {\r\n\t\t\t\t\t\tresult.push(...glob.sync(path.resolve(extension.extensionPath, xmLJavaExtensionPath)));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor (const extension of jars) {\r\n\t\tresult.push(...glob.sync(extension));\r\n\t}\r\n\t// Make a copy of extensions:\r\n\texistingExtensions = result.slice();\r\n\treturn result;\r\n}\r\n\r\nexport function onExtensionChange(extensions: readonly vscode.Extension<any>[], jars: string[]) {\r\n\tif (!existingExtensions) {\r\n\t\treturn;\r\n\t}\r\n\tconst oldExtensions = new Set(existingExtensions.slice());\r\n\tconst newExtensions = collectXmlJavaExtensions(extensions, jars);\r\n\tlet hasChanged = ( oldExtensions.size !== newExtensions.length);\r\n\tif (!hasChanged) {\r\n\t\tfor (const newExtension of newExtensions) {\r\n\t\t\tif (!oldExtensions.has(newExtension)) {\r\n\t\t\t\thasChanged = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (hasChanged) {\r\n\t\tconst msg = `Extensions to the XML Language Server changed, reloading ${vscode.env.appName} is required for the changes to take effect.`;\r\n\t\tconst action = 'Reload';\r\n\t\tconst restartId = Commands.RELOAD_WINDOW;\r\n\t\tvscode.window.showWarningMessage(msg, action).then((selection) => {\r\n\t\t\tif (action === selection) {\r\n\t\t\t\tvscode.commands.executeCommand(restartId);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","'use strict';\n\nimport { window, workspace, Uri, ExtensionContext, ConfigurationTarget, env } from 'vscode';\nimport * as cp from 'child_process';\nimport * as path from 'path';\nimport { IS_WORKSPACE_JDK_XML_ALLOWED, getKey, IS_WORKSPACE_VMARGS_XML_ALLOWED, getJavaagentFlag, IS_WORKSPACE_JDK_ALLOWED, getXMLConfiguration, getJavaConfiguration, xmlServerVmargs } from './settings';\n\nconst pathExists = require('path-exists');\nconst expandHomeDir = require('expand-home-dir');\nconst findJavaHome = require('find-java-home');\nconst isWindows = process.platform.indexOf('win') === 0;\nconst JAVA_FILENAME = 'java' + (isWindows?'.exe':'');\n\nexport interface RequirementsData {\n    java_home: string;\n    java_version: number;\n}\n\ninterface ErrorData {\n    message: string;\n    label: string;\n    openUrl: Uri;\n    replaceClose: boolean;\n}\n/**\n * Resolves the requirements needed to run the extension.\n * Returns a promise that will resolve to a RequirementsData if\n * all requirements are resolved, it will reject with ErrorData if\n * if any of the requirements fails to resolve.\n *\n */\nexport async function resolveRequirements(context: ExtensionContext): Promise<RequirementsData> {\n    const javaHome = await checkJavaRuntime(context);\n    const javaVersion = await checkJavaVersion(javaHome);\n    return Promise.resolve({ 'java_home': javaHome, 'java_version': javaVersion});\n}\n\nfunction checkJavaRuntime(context: ExtensionContext): Promise<string> {\n    return new Promise(async (resolve, reject) => {\n        let source : string;\n        let javaHome = await readXMLJavaHomeConfig(context);\n        if (javaHome) {\n            source = 'The xml.java.home variable defined in VS Code settings';\n        } else {\n            javaHome = await readJavaHomeConfig(context);\n            if (javaHome) {\n                source = 'The java.home variable defined in VS Code settings';\n            } else {\n                javaHome = process.env['JDK_HOME'];\n                if (javaHome) {\n                    source = 'The JDK_HOME environment variable';\n                } else {\n                    javaHome = process.env['JAVA_HOME'];\n                    source = 'The JAVA_HOME environment variable';\n                }\n            }\n        }\n        \n        if (javaHome) {\n            javaHome = expandHomeDir(javaHome);\n            if (!pathExists.sync(javaHome)) {\n                openJDKDownload(reject, source+' points to a missing folder');\n            } else if (!pathExists.sync(path.resolve(javaHome, 'bin', JAVA_FILENAME))){\n                openJDKDownload(reject, source+ ' does not point to a Java runtime.');\n            }\n            return resolve(javaHome);\n        }\n        //No settings, let's try to detect as last resort.\n        findJavaHome({ allowJre: true }, function (err, home) {\n            if (err){\n                openJDKDownload(reject, 'Java runtime could not be located.');\n            }\n            else {\n                resolve(home);\n            }\n        });\n    });\n}\n\nexport async function readXMLJavaHomeConfig(context: ExtensionContext) {\n    const xmlJavaHome = 'xml.java.home';\n    let javaHome = workspace.getConfiguration().inspect<string>(xmlJavaHome).workspaceValue;\n    let isVerified = javaHome === undefined || javaHome === null;\n    if (isVerified) {\n        javaHome = getXMLConfiguration().get(\"java.home\");\n    }\n    const allow = 'Allow';\n    const disallow = 'Disallow';\n    const key = getKey(IS_WORKSPACE_JDK_XML_ALLOWED, context.storagePath, javaHome);\n    const globalState = context.globalState;\n    if (!isVerified) {\n        isVerified = globalState.get(key);\n        if (isVerified === undefined) {\n            await window.showErrorMessage(`Security Warning! Do you allow this workspace to set the ${xmlJavaHome} variable? \\n ${xmlJavaHome}: ${javaHome}`, disallow, allow).then(async selection => {\n                if (selection === allow) {\n                    globalState.update(key, true);\n                } else if (selection === disallow) {\n                    globalState.update(key, false);\n                    await workspace.getConfiguration().update(xmlJavaHome, undefined, ConfigurationTarget.Workspace);\n                }\n            });\n            isVerified = globalState.get(key);\n        }\n    }\n    const vmargs = workspace.getConfiguration().inspect(xmlServerVmargs).workspaceValue;\n    if (vmargs !== undefined) {\n        const agentFlag = getJavaagentFlag(vmargs);\n        if (agentFlag !== null) {\n            const keyVmargs = getKey(IS_WORKSPACE_VMARGS_XML_ALLOWED, context.storagePath, vmargs);\n            const vmargsVerified = globalState.get(keyVmargs);\n            if (vmargsVerified === undefined || vmargsVerified === null) {\n                await window.showErrorMessage(`Security Warning! The ${xmlServerVmargs} variable defined in ${env.appName} settings includes the (${agentFlag}) javagent preference. Do you allow it to be used?`, disallow, allow).then(async selection => {\n                    if (selection === allow) {\n                        globalState.update(keyVmargs, true);\n                    } else if (selection === disallow) {\n                        globalState.update(keyVmargs, false);\n                        await workspace.getConfiguration().update(xmlServerVmargs, undefined, ConfigurationTarget.Workspace);\n                    }\n                });\n            }\n        }\n    }\n    if (isVerified) {\n        return javaHome;\n    } else {\n        return workspace.getConfiguration().inspect<string>('xml.java.home').globalValue;\n    }\n}\n\nasync function readJavaHomeConfig(context: ExtensionContext) {\n    let javaHome = workspace.getConfiguration().inspect<string>('java.home').workspaceValue;\n    let isVerified = javaHome === undefined || javaHome === null;\n    if (isVerified) {\n        javaHome = getJavaConfiguration().get('home');\n    }\n    const key = getKey(IS_WORKSPACE_JDK_ALLOWED, context.storagePath, javaHome);\n    const globalState = context.globalState;\n    isVerified = globalState.get(key);\n    if (isVerified) {\n        return javaHome;\n    } else {\n        return workspace.getConfiguration().inspect<string>('java.home').globalValue;\n    }\n}\n \nfunction checkJavaVersion(java_home: string): Promise<number> {\n    return new Promise((resolve, reject) => {\n        cp.execFile(java_home + '/bin/java', ['-version'], {}, (error, stdout, stderr) => {\n            let javaVersion = parseMajorVersion(stderr);\n            if (javaVersion < 8) {\n                openJDKDownload(reject, 'Java 8 or more recent is required to run. Please download and install a recent Java runtime.');\n            }\n            else {\n                resolve(javaVersion);\n            }\n        });\n    });\n}\n\nexport function parseMajorVersion(content:string):number {\n    let regexp = /version \"(.*)\"/g;\n    let match = regexp.exec(content);\n    if (!match) {\n        return 0;\n    }\n    let version = match[1];\n    //Ignore '1.' prefix for legacy Java versions\n    if (version.startsWith('1.')) {\n        version = version.substring(2);\n    }\n\n    //look into the interesting bits now\n    regexp = /\\d+/g;\n    match = regexp.exec(version);\n    let javaVersion = 0;\n    if (match) {\n        javaVersion = parseInt(match[0]);\n    }\n    return javaVersion;\n}\n\nfunction openJDKDownload(reject, cause : string) {\n    let jdkUrl = 'https://developers.redhat.com/products/openjdk/download/?sc_cid=701f2000000RWTnAAO';\n    if (process.platform === 'darwin') {\n        jdkUrl = 'https://adoptopenjdk.net/releases.html';\n    }\n    reject({\n        message: cause,\n        label: 'Get the Java runtime',\n        openUrl: Uri.parse(jdkUrl),\n        replaceClose: false\n    });\n}\n","'use strict';\nconst fs = require('fs');\nconst {promisify} = require('util');\n\nconst pAccess = promisify(fs.access);\n\nmodule.exports = async path => {\n\ttry {\n\t\tawait pAccess(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n\nmodule.exports.sync = path => {\n\ttry {\n\t\tfs.accessSync(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n","var join = require(\"path\").join;\nvar homedir = process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];\n\nmodule.exports = expandHomeDir;\n\nfunction expandHomeDir (path) {\n  if (!path) return path;\n  if (path == '~') return homedir;\n  if (path.slice(0, 2) != '~/') return path;\n  return join(homedir, path.slice(2));\n}\n","/* Copyright 2013 Joseph Spencer.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nvar which = require('which');\nvar fs = require('fs');\nvar path = require('path');\nvar dirname = path.dirname;\nvar exec = require('child_process').exec;\nvar exists = fs.existsSync;\nvar stat = fs.statSync;\nvar readlink = fs.readlinkSync;\nvar resolve = path.resolve;\nvar lstat = fs.lstatSync;\nvar WinReg = require(\"winreg\");\nvar javaHome;\n\nmodule.exports = findJavaHome;\n\nvar isWindows = process.platform.indexOf('win') === 0;\n\nfunction findJavaHome(options, cb){\n  if(typeof options === 'function'){\n    cb = options;\n    options = null;\n  }\n  options = options || {\n    allowJre: false\n  };\n  var JAVA_FILENAME = (options.allowJre ? 'java' : 'javac') + (isWindows?'.exe':'');\n  var macUtility;\n  var possibleKeyPaths;\n\n  if(process.env.JAVA_HOME && dirIsJavaHome(process.env.JAVA_HOME, JAVA_FILENAME)){\n    javaHome = process.env.JAVA_HOME;\n  }\n\n  if(javaHome)return next(cb, null, javaHome);\n\n  //windows\n  if(process.platform.indexOf('win') === 0){\n    //java_home can be in many places\n    //JDK paths\n    possibleKeyPaths = [        \n      \"SOFTWARE\\\\JavaSoft\\\\Java Development Kit\"\n    ];\n    //JRE paths\n    if(options.allowJre){\n      possibleKeyPaths = possibleKeyPaths.concat([\n      \"SOFTWARE\\\\JavaSoft\\\\Java Runtime Environment\",\n      ]);\n    }\n\n    javaHome= findInRegistry(possibleKeyPaths);\n    if(javaHome)return next(cb, null, javaHome);\n  }\n\n  which(JAVA_FILENAME, function(err, proposed){\n    if(err)return next(cb, err, null);\n\n    //resolve symlinks\n    proposed = findLinkedFile(proposed);\n\n    //get the /bin directory\n    proposed = dirname(proposed);\n\n    //on mac, java install has a utility script called java_home that does the\n    //dirty work for us\n    macUtility = resolve(proposed, 'java_home');\n    if(exists(macUtility)){\n      exec(macUtility, {cwd:proposed}, function(error, out, err){\n        if(error || err)return next(cb, error || ''+err, null);\n        javaHome = ''+out.replace(/\\n$/, '');\n        next(cb, null, javaHome);\n      }) ;\n      return;\n    }\n\n    //up one from /bin\n    javaHome = dirname(proposed);\n\n    next(cb, null, javaHome);\n  });\n}\n\nfunction findInRegistry(paths){\n  if(!paths.length) return null; \n  \n  var keysFound =[];\n  var keyPath = paths.forEach(function(element) {\n    var key = new WinReg({ key: element });\n    key.keys(function(err, javaKeys){\n      keysFound.concat(javaKeys);\n    });\n  }, this)\n  \n  if(!keysFound.length) return null;\n\n  keysFound = keysFound.sort(function(a,b){\n     var aVer = parseFloat(a.key);\n     var bVer = parseFloat(b.key);\n     return bVer - aVer;\n  });\n  var registryJavaHome;\n  keysFound[0].get('JavaHome',function(err,home){\n   registryJavaHome = home.value; \n  });\n\n  return registryJavaHome;\n}\n\n// iterate through symbolic links until\n// file is found\nfunction findLinkedFile(file){\n  if(!lstat(file).isSymbolicLink()) return file;\n  return findLinkedFile(readlink(file));\n}\n\nfunction next(cb, err, home){\n  process.nextTick(function(){cb(err, home);});\n}\n\nfunction dirIsJavaHome(dir, JAVA_FILENAME){\n  return exists(''+dir)\n    && stat(dir).isDirectory()\n    && exists(path.resolve(dir, 'bin', JAVA_FILENAME));\n}\n\nfunction after(count, cb){\n  return function(){\n    if(count <= 1)return process.nextTick(cb);\n    --count;\n  };\n}","module.exports = which\nwhich.sync = whichSync\n\nvar path = require(\"path\")\n  , fs\n  , COLON = process.platform === \"win32\" ? \";\" : \":\"\n  , isExe\n  , fs = require(\"fs\")\n\nif (process.platform == \"win32\") {\n  // On windows, there is no good way to check that a file is executable\n  isExe = function isExe () { return true }\n} else {\n  isExe = function isExe (mod, uid, gid) {\n    //console.error(mod, uid, gid);\n    //console.error(\"isExe?\", (mod & 0111).toString(8))\n    var ret = (mod & 0001)\n        || (mod & 0010) && process.getgid && gid === process.getgid()\n        || (mod & 0010) && process.getuid && 0   === process.getuid()\n        || (mod & 0100) && process.getuid && uid === process.getuid()\n        || (mod & 0100) && process.getuid && 0   === process.getuid()\n    //console.error(\"isExe?\", ret)\n    return ret\n  }\n}\n\n\n\nfunction which (cmd, cb) {\n  if (isAbsolute(cmd)) return cb(null, cmd)\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  //console.error(\"pathEnv\", pathEnv)\n  ;(function F (i, l) {\n    if (i === l) return cb(new Error(\"not found: \"+cmd))\n    var p = path.resolve(pathEnv[i], cmd)\n    ;(function E (ii, ll) {\n      if (ii === ll) return F(i + 1, l)\n      var ext = pathExt[ii]\n      //console.error(p + ext)\n      fs.stat(p + ext, function (er, stat) {\n        if (!er &&\n            stat &&\n            stat.isFile() &&\n            isExe(stat.mode, stat.uid, stat.gid)) {\n          //console.error(\"yes, exe!\", p + ext)\n          return cb(null, p + ext)\n        }\n        return E(ii + 1, ll)\n      })\n    })(0, pathExt.length)\n  })(0, pathEnv.length)\n}\n\nfunction whichSync (cmd) {\n  if (isAbsolute(cmd)) return cmd\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  for (var i = 0, l = pathEnv.length; i < l; i ++) {\n    var p = path.join(pathEnv[i], cmd)\n    for (var j = 0, ll = pathExt.length; j < ll; j ++) {\n      var cur = p + pathExt[j]\n      var stat\n      try { stat = fs.statSync(cur) } catch (ex) {}\n      if (stat &&\n          stat.isFile() &&\n          isExe(stat.mode, stat.uid, stat.gid)) return cur\n    }\n  }\n  throw new Error(\"not found: \"+cmd)\n}\n\nvar isAbsolute = process.platform === \"win32\" ? absWin : absUnix\n\nfunction absWin (p) {\n  if (absUnix(p)) return true\n  // pull off the device/UNC bit from a windows path.\n  // from node's lib/path.js\n  var splitDeviceRe =\n        /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?([\\\\\\/])?/\n    , result = splitDeviceRe.exec(p)\n    , device = result[1] || ''\n    , isUnc = device && device.charAt(1) !== ':'\n    , isAbsolute = !!result[2] || isUnc // UNC paths are always absolute\n\n  return isAbsolute\n}\n\nfunction absUnix (p) {\n  return p.charAt(0) === \"/\" || p === \"\"\n}\n","/************************************************************************************************************\r\n * registry.js - contains a wrapper for the REG command under Windows, which provides access to the registry\r\n *\r\n * @author Paul Bottin a/k/a FrEsC\r\n *\r\n */\r\n\r\n/* imports */\r\nvar util          = require('util')\r\n,   path          = require('path')\r\n,   spawn         = require('child_process').spawn\r\n\r\n/* set to console.log for debugging */\r\n,   log           = function () {}\r\n\r\n/* registry hive ids */\r\n,   HKLM          = 'HKLM'\r\n,   HKCU          = 'HKCU'\r\n,   HKCR          = 'HKCR'\r\n,   HKU           = 'HKU'\r\n,   HKCC          = 'HKCC'\r\n,   HIVES         = [ HKLM, HKCU, HKCR, HKU, HKCC ]\r\n\r\n/* registry value type ids */\r\n,   REG_SZ        = 'REG_SZ'\r\n,   REG_MULTI_SZ  = 'REG_MULTI_SZ'\r\n,   REG_EXPAND_SZ = 'REG_EXPAND_SZ'\r\n,   REG_DWORD     = 'REG_DWORD'\r\n,   REG_QWORD     = 'REG_QWORD'\r\n,   REG_BINARY    = 'REG_BINARY'\r\n,   REG_NONE      = 'REG_NONE'\r\n,   REG_TYPES     = [ REG_SZ, REG_MULTI_SZ, REG_EXPAND_SZ, REG_DWORD, REG_QWORD, REG_BINARY, REG_NONE ]\r\n\r\n/* default registry value name */\r\n,   DEFAULT_VALUE = ''\r\n\r\n/* general key pattern */\r\n,   KEY_PATTERN   = /(\\\\[a-zA-Z0-9_\\s]+)*/\r\n\r\n/* key path pattern (as returned by REG-cli) */\r\n,   PATH_PATTERN  = /^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/\r\n\r\n/* registry item pattern */\r\n,   ITEM_PATTERN  = /^(.*)\\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\\s+([^\\s].*)$/\r\n\r\n/**\r\n * Creates an Error object that contains the exit code of the REG.EXE process.\r\n * This contructor is private. Objects of this type are created internally and returned in the <code>err</code> parameters in case the REG.EXE process doesn't exit cleanly.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} message - the error message\r\n * @param {number} code - the process exit code\r\n *\r\n */\r\nfunction ProcessUncleanExitError(message, code) {\r\n  if (!(this instanceof ProcessUncleanExitError))\r\n    return new ProcessUncleanExitError(message, code);\r\n\r\n  Error.captureStackTrace(this, ProcessUncleanExitError);\r\n\r\n  /**\r\n   * The error name.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#name\r\n   */\r\n  this.__defineGetter__('name', function () { return ProcessUncleanExitError.name; });\r\n\r\n  /**\r\n   * The error message.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#message\r\n   */\r\n  this.__defineGetter__('message', function () { return message; });\r\n\r\n  /**\r\n   * The process exit code.\r\n   * @readonly\r\n   * @member {number} ProcessUncleanExitError#code\r\n   */\r\n  this.__defineGetter__('code', function () { return code; });\r\n\r\n}\r\n\r\nutil.inherits(ProcessUncleanExitError, Error);\r\n\r\n/*\r\n * Captures stdout/stderr for a child process\r\n */\r\nfunction captureOutput(child) {\r\n  // Use a mutable data structure so we can append as we get new data and have\r\n  // the calling context see the new data\r\n  var output = {'stdout': '', 'stderr': ''};\r\n\r\n  child.stdout.on('data', function(data) { output[\"stdout\"] += data.toString(); });\r\n  child.stderr.on('data', function(data) { output[\"stderr\"] += data.toString(); });\r\n\r\n  return output;\r\n}\r\n\r\n\r\n/*\r\n * Returns an error message containing the stdout/stderr of the child process\r\n */\r\nfunction mkErrorMsg(registryCommand, code, output) {\r\n    var stdout = output['stdout'].trim();\r\n    var stderr = output['stderr'].trim();\r\n\r\n    var msg = util.format(\"%s command exited with code %d:\\n%s\\n%s\", registryCommand, code, stdout, stderr);\r\n    return new ProcessUncleanExitError(msg, code);\r\n}\r\n\r\n\r\n/*\r\n * Converts x86/x64 to 32/64\r\n */\r\nfunction convertArchString(archString) {\r\n  if (archString == 'x64') {\r\n    return '64';\r\n  } else if (archString == 'x86') {\r\n    return '32';\r\n  } else {\r\n    throw new Error('illegal architecture: ' + archString + ' (use x86 or x64)');\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Adds correct architecture to reg args\r\n */\r\nfunction pushArch(args, arch) {\r\n  if (arch) {\r\n    args.push('/reg:' + convertArchString(arch));\r\n  }\r\n}\r\n\r\n/*\r\n * Get the path to system's reg.exe. Useful when another reg.exe is added to the PATH\r\n * Implemented only for Windows\r\n */\r\nfunction getRegExePath() {\r\n    if (process.platform === 'win32') {\r\n        return path.join(process.env.windir, 'system32', 'reg.exe');\r\n    } else {\r\n        return \"REG\";\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a single registry value record.\r\n * This contructor is private. Objects of this type are created internally and returned by methods of {@link Registry} objects.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} host - the hostname\r\n * @param {string} hive - the hive id\r\n * @param {string} key - the registry key\r\n * @param {string} name - the value name\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {string} arch - the hive architecture ('x86' or 'x64')\r\n *\r\n */\r\nfunction RegistryItem (host, hive, key, name, type, value, arch) {\r\n\r\n  if (!(this instanceof RegistryItem))\r\n    return new RegistryItem(host, hive, key, name, type, value, arch);\r\n\r\n  /* private members */\r\n  var _host = host    // hostname\r\n  ,   _hive = hive    // registry hive\r\n  ,   _key = key      // registry key\r\n  ,   _name = name    // property name\r\n  ,   _type = type    // property type\r\n  ,   _value = value  // property value\r\n  ,   _arch = arch    // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} RegistryItem#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} RegistryItem#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key.\r\n   * @readonly\r\n   * @member {string} RegistryItem#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The value name.\r\n   * @readonly\r\n   * @member {string} RegistryItem#name\r\n   */\r\n  this.__defineGetter__('name', function () { return _name; });\r\n\r\n  /**\r\n   * The value type.\r\n   * @readonly\r\n   * @member {string} RegistryItem#type\r\n   */\r\n  this.__defineGetter__('type', function () { return _type; });\r\n\r\n  /**\r\n   * The value.\r\n   * @readonly\r\n   * @member {string} RegistryItem#value\r\n   */\r\n  this.__defineGetter__('value', function () { return _value; });\r\n\r\n  /**\r\n   * The hive architecture.\r\n   * @readonly\r\n   * @member {string} RegistryItem#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n}\r\n\r\nutil.inherits(RegistryItem, Object);\r\n\r\n/**\r\n * Creates a registry object, which provides access to a single registry key.\r\n * Note: This class is returned by a call to ```require('winreg')```.\r\n *\r\n * @public\r\n * @class\r\n *\r\n * @param {object} options - the options\r\n * @param {string=} options.host - the hostname\r\n * @param {string=} options.hive - the hive id\r\n * @param {string=} options.key - the registry key\r\n * @param {string=} options.arch - the optional registry hive architecture ('x86' or 'x64'; only valid on Windows 64 Bit Operating Systems)\r\n *\r\n * @example\r\n * var Registry = require('winreg')\r\n * ,   autoStartCurrentUser = new Registry({\r\n *       hive: Registry.HKCU,\r\n *       key:  '\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run'\r\n *     });\r\n *\r\n */\r\nfunction Registry (options) {\r\n\r\n  if (!(this instanceof Registry))\r\n    return new Registry(options);\r\n\r\n  /* private members */\r\n  var _options = options || {}\r\n  ,   _host = '' + (_options.host || '')    // hostname\r\n  ,   _hive = '' + (_options.hive || HKLM)  // registry hive\r\n  ,   _key  = '' + (_options.key  || '')    // registry key\r\n  ,   _arch = _options.arch || null         // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} Registry#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} Registry#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key name.\r\n   * @readonly\r\n   * @member {string} Registry#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The full path to the registry key.\r\n   * @readonly\r\n   * @member {string} Registry#path\r\n   */\r\n  this.__defineGetter__('path', function () { return (_host.length == 0 ? '' : '\\\\\\\\' + _host + '\\\\') + _hive + _key; });\r\n\r\n  /**\r\n   * The registry hive architecture ('x86' or 'x64').\r\n   * @readonly\r\n   * @member {string} Registry#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n  /**\r\n   * Creates a new {@link Registry} instance that points to the parent registry key.\r\n   * @readonly\r\n   * @member {Registry} Registry#parent\r\n   */\r\n  this.__defineGetter__('parent', function () {\r\n    var i = _key.lastIndexOf('\\\\')\r\n    return new Registry({\r\n      host: this.host,\r\n      hive: this.hive,\r\n      key:  (i == -1)?'':_key.substring(0, i),\r\n      arch: this.arch\r\n    });\r\n  });\r\n\r\n  // validate options...\r\n  if (HIVES.indexOf(_hive) == -1)\r\n    throw new Error('illegal hive specified.');\r\n\r\n  if (!KEY_PATTERN.test(_key))\r\n    throw new Error('illegal key specified.');\r\n\r\n  if (_arch && _arch != 'x64' && _arch != 'x86')\r\n    throw new Error('illegal architecture specified (use x86 or x64)');\r\n\r\n}\r\n\r\n/**\r\n * Registry hive key HKEY_LOCAL_MACHINE.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKLM = HKLM;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_USER.\r\n * @type {string}\r\n */\r\nRegistry.HKCU = HKCU;\r\n\r\n/**\r\n * Registry hive key HKEY_CLASSES_ROOT.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCR = HKCR;\r\n\r\n/**\r\n * Registry hive key HKEY_USERS.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKU = HKU;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_CONFIG.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCC = HKCC;\r\n\r\n/**\r\n * Collection of available registry hive keys.\r\n * @type {array}\r\n */\r\nRegistry.HIVES = HIVES;\r\n\r\n/**\r\n * Registry value type STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_SZ = REG_SZ;\r\n\r\n/**\r\n * Registry value type MULTILINE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_MULTI_SZ = REG_MULTI_SZ;\r\n\r\n/**\r\n * Registry value type EXPANDABLE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_EXPAND_SZ = REG_EXPAND_SZ;\r\n\r\n/**\r\n * Registry value type DOUBLE_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_DWORD = REG_DWORD;\r\n\r\n/**\r\n * Registry value type QUAD_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_QWORD = REG_QWORD;\r\n\r\n/**\r\n * Registry value type BINARY.\r\n * @type {string}\r\n */\r\nRegistry.REG_BINARY = REG_BINARY;\r\n\r\n/**\r\n * Registry value type UNKNOWN.\r\n * @type {string}\r\n */\r\nRegistry.REG_NONE = REG_NONE;\r\n\r\n/**\r\n * Collection of available registry value types.\r\n * @type {array}\r\n */\r\nRegistry.REG_TYPES = REG_TYPES;\r\n\r\n/**\r\n * The name of the default value. May be used instead of the empty string literal for better readability.\r\n * @type {string}\r\n */\r\nRegistry.DEFAULT_VALUE = DEFAULT_VALUE;\r\n\r\n/**\r\n * Retrieve all values from this registry key.\r\n * @param {valuesCallback} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link RegistryItem} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.values = function values (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = []\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n            items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n        var match = ITEM_PATTERN.exec(items[i])\r\n        ,   name\r\n        ,   type\r\n        ,   value\r\n\r\n        if (match) {\r\n          name = match[1].trim();\r\n          type = match[2].trim();\r\n          value = match[3];\r\n          result.push(new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch));\r\n        }\r\n      }\r\n\r\n      cb(null, result);\r\n\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Retrieve all subkeys from this registry key.\r\n * @param {function (err, items)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link Registry} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keys = function keys (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.stdout.on('end', function () {\r\n\r\n    var items = []\r\n    ,   result = []\r\n    ,   lines = buffer.split('\\n')\r\n\r\n    for (var i = 0, l = lines.length; i < l; i++) {\r\n      var line = lines[i].trim();\r\n      if (line.length > 0) {\r\n        log(line);\r\n        items.push(line);\r\n      }\r\n    }\r\n\r\n    for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n      var match = PATH_PATTERN.exec(items[i])\r\n      ,   hive\r\n      ,   key\r\n\r\n      if (match) {\r\n        hive = match[1];\r\n        key  = match[2];\r\n        if (key && (key !== self.key)) {\r\n          result.push(new Registry({\r\n            host: self.host,\r\n            hive: self.hive,\r\n            key:  key,\r\n            arch: self.arch\r\n          }));\r\n        }\r\n      }\r\n    }\r\n\r\n    cb(null, result);\r\n\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Gets a named value from this registry key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, item)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {RegistryItem=} cb.item - the retrieved registry item\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.get = function get (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['QUERY', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = null\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n             items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      //Get last item - so it works in XP where REG QUERY returns with a header\r\n      var item = items[items.length-1] || ''\r\n      ,   match = ITEM_PATTERN.exec(item)\r\n      ,   name\r\n      ,   type\r\n      ,   value\r\n\r\n      if (match) {\r\n        name = match[1].trim();\r\n        type = match[2].trim();\r\n        value = match[3];\r\n        result = new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch);\r\n      }\r\n\r\n      cb(null, result);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Sets a named value in this registry key, overwriting an already existing value.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.set = function set (name, type, value, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  if (REG_TYPES.indexOf(type) == -1)\r\n    throw Error('illegal type specified.');\r\n\r\n  var args = ['ADD', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  args = args.concat(['/t', type, '/d', value, '/f']);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output, null));\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove a named value from this registry key. If name is empty, sets the default value of this key.\r\n * Note: This key must be already existing.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.remove = function remove (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = name ? ['DELETE', this.path, '/f', '/v', name] : ['DELETE', this.path, '/f', '/ve'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove all subkeys and values (including the default value) from this registry key.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.clear = function clear (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f', '/va'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg(\"DELETE\", code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias for the clear method to keep it backward compatible.\r\n * @method\r\n * @deprecated Use {@link Registry#clear} or {@link Registry#destroy} in favour of this method.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.erase = Registry.prototype.clear;\r\n\r\n/**\r\n * Delete this key and all subkeys from the registry.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.destroy = function destroy (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Create this registry key. Note that this is a no-op if the key already exists.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.create = function create (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['ADD', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if this key already exists.\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a registry key with this name already exists\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keyExists = function keyExists (cb) {\r\n\r\n  this.values(function (err, items) {\r\n    if (err) {\r\n      // process should return with code 1 if key not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if a value with the given name already exists within this key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a value with the given name was found in this key\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.valueExists = function valueExists (name, cb) {\r\n\r\n  this.get(name, function (err, item) {\r\n    if (err) {\r\n      // process should return with code 1 if value not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\nmodule.exports = Registry;\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n * \n *  Retrieved from: https://github.com/Microsoft/vscode/blob/f707828426bd87e88c17d2da34f2ceed0019d8bd/extensions/html-language-features/client/src/tagClosing.ts\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { window, workspace, Disposable, TextDocumentContentChangeEvent, TextDocument, Position, SnippetString, Range } from 'vscode';\n\nexport interface AutoCloseResult {\n  snippet: string,\n  range?: Range\n}\n\nexport function activateTagClosing(tagProvider: (document: TextDocument, position: Position) => Thenable<AutoCloseResult>, supportedLanguages: { [id: string]: boolean }, configName: string): Disposable {\n\tconst TRIGGER_CHARACTERS = ['>', '/'];\n\tlet disposables: Disposable[] = [];\n\tworkspace.onDidChangeTextDocument(event => onDidChangeTextDocument(event.document, event.contentChanges), null, disposables);\n\n\tlet isEnabled = false;\n\tupdateEnabledState();\n\twindow.onDidChangeActiveTextEditor(updateEnabledState, null, disposables);\n\n\tlet timeout: NodeJS.Timer | undefined = void 0;\n\n\tfunction updateEnabledState() {\n\t\tisEnabled = false;\n\t\tlet editor = window.activeTextEditor;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tlet document = editor.document;\n\t\tif (!supportedLanguages[document.languageId]) {\n\t\t\treturn;\n\t\t}\n\t\tif (!workspace.getConfiguration(void 0, document.uri).get<boolean>(configName)) {\n\t\t\treturn;\n\t\t}\n\t\tisEnabled = true;\n\t}\n\n\tfunction onDidChangeTextDocument(document: TextDocument, changes: ReadonlyArray<TextDocumentContentChangeEvent>) {\n\t\tif (!isEnabled) {\n\t\t\treturn;\n\t\t}\n\t\tlet activeDocument = window.activeTextEditor && window.activeTextEditor.document;\n\t\tif (document !== activeDocument || changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof timeout !== 'undefined') {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\tlet lastChange = changes[changes.length - 1];\n\t\tlet lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastChange.text.length > 1 || TRIGGER_CHARACTERS.indexOf(lastCharacter) < 0) {\n\t\t\treturn;\n\t\t}\n\t\tlet rangeStart = lastChange.range.start;\n\t\tlet version = document.version;\n\t\ttimeout = setTimeout(() => {\n\t\t\tlet position = new Position(rangeStart.line, rangeStart.character + lastChange.text.length);\n\t\t\ttagProvider(document, position).then(result => {\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet text = result.snippet;\n\t\t\t\tlet replaceLocation : Position | Range;\n\t\t\t\tlet range : Range = result.range;\n\t\t\t\tif(range != null) {\n\t\t\t\t\t// re-create Range\n\t\t\t\t\tlet line = range.start.line;\n\t\t\t\t\tlet character = range.start.character;\n\t\t\t\t\tlet startPosition = new Position(line, character);\n\t\t\t\t\tline = range.end.line;\n\t\t\t\t\tcharacter = range.end.character;\n\t\t\t\t\tlet endPosition = new Position(line, character);\n\t\t\t\t\treplaceLocation = new Range(startPosition, endPosition);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treplaceLocation = position;\n\t\t\t\t}\n\t\t\t\tif (text && isEnabled) {\n\t\t\t\t\tlet activeEditor = window.activeTextEditor;\n\t\t\t\t\tif (activeEditor) {\n\t\t\t\t\t\tlet activeDocument = activeEditor.document;\n\t\t\t\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), replaceLocation);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, (reason: any) => {\n\t\t\t\tconsole.log('xml/closeTag request has been cancelled');\n\t\t\t});\n\t\t\ttimeout = void 0;\n\t\t}, 100);\n\t}\n\treturn Disposable.from(...disposables);\n}","import * as path from \"path\";\nimport { TextDocument, window, workspace, WorkspaceFolder } from \"vscode\";\nimport { XMLFileAssociation } from \"./extension\";\n\n/**\n * Represents a variable that refers to a value that can be resolved\n */\nclass VariableSubstitution {\n\n  private varName: string;\n  private varKind: VariableSubstitutionKind;\n  private getValue: (currentFileUri: string, currentWorkspaceUri: string) => string;\n  private replaceRegExp: RegExp | undefined;\n\n  /**\n   *\n   * @param name the name of this variable\n   * @param kind the kind of this variable\n   * @param getValue a function that resolves the value of the variable\n   */\n  constructor(name: string, kind: VariableSubstitutionKind, getValue: (currentFileUri: string, currentWorkspaceUri: string) => string) {\n    this.varName = name;\n    this.varKind = kind;\n    this.getValue = getValue;\n  }\n\n  public get name(): string {\n    return this.varName;\n  }\n\n  public get kind(): VariableSubstitutionKind {\n    return this.varKind;\n  }\n\n  /**\n   * Returns the string with the references to this variable replaced with the value, or the original string if the value cannot be resolved\n   *\n   * @param original the string to substitute variable value\n   * @param currentFileUri the uri of the currently focused file, as a string\n   * @param currentWorkspaceUri the uri of the root of the currently open workspace, as a string\n   * @returns the string with the references to this variable replaced with the value, or the original string if the value cannot be resolved\n   */\n  public substituteString(original: string, currentFileUri: string, currentWorkspaceUri: string): string {\n    const value: string = this.getValue(currentFileUri, currentWorkspaceUri);\n    return value ? original.replace(this.getReplaceRegExp(), value) : original;\n  }\n\n  /**\n   * Returns a regex that matches all references to the variable\n   *\n   * Lazily initialized\n   *\n   * @returns a regex that matches all references to the variable\n   */\n  public getReplaceRegExp(): RegExp {\n    if (!this.replaceRegExp) {\n      this.replaceRegExp = new RegExp('\\\\$\\\\{' + `${this.name}` + '\\\\}', 'g');\n    }\n    return this.replaceRegExp;\n  }\n}\n\nenum VariableSubstitutionKind {\n  Workspace,\n  File\n}\n\n// A list of all variable substitutions. To add a new variable substitution, add an entry to this list\nconst VARIABLE_SUBSTITUTIONS: VariableSubstitution[] = [\n  new VariableSubstitution(\n    \"workspaceFolder\",\n    VariableSubstitutionKind.Workspace,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return currentWorkspaceUri;\n    }\n  ),\n  new VariableSubstitution(\n    \"fileDirname\",\n    VariableSubstitutionKind.File,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return path.dirname(currentFileUri);\n    }\n  ),\n  new VariableSubstitution(\n    \"fileBasenameNoExtension\",\n    VariableSubstitutionKind.File,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return path.basename(currentFileUri, path.extname(currentFileUri));\n    }\n  )\n];\n\n/**\n * Returns the file associations with as many variable references resolved as possible\n *\n * @param associations the file associations to resolve the variable references in\n * @returns the file associations with as many variable references resolved as possible\n */\nexport function getVariableSubstitutedAssociations(associations: XMLFileAssociation[]): XMLFileAssociation[] {\n\n  // Collect properties needed to resolve variables\n  const currentFile: TextDocument = (window.activeTextEditor && window.activeTextEditor.document && window.activeTextEditor.document.languageId === 'xml') ?  window.activeTextEditor.document : undefined;\n  const currentFileUri: string = (currentFile && currentFile.uri) ? currentFile.uri.fsPath : undefined;\n  const currentWorkspace: WorkspaceFolder = (currentFile && currentFile.uri) ?  workspace.getWorkspaceFolder(currentFile.uri) : undefined;\n  const currentWorkspaceUri: string = (currentWorkspace && currentWorkspace.uri.fsPath)\n    || (workspace.workspaceFolders && workspace.workspaceFolders[0].uri.fsPath);\n\n  // Remove variables that can't be resolved\n  let variablesToSubstitute = VARIABLE_SUBSTITUTIONS;\n  if (!currentWorkspaceUri) {\n    variablesToSubstitute = variablesToSubstitute.filter(variable => { return variable.kind !== VariableSubstitutionKind.Workspace });\n  }\n  if (!currentFileUri) {\n    variablesToSubstitute = variablesToSubstitute.filter(variable => { return variable.kind !== VariableSubstitutionKind.File });\n  }\n\n  /**\n   * Returns the string with the values for all the variables that can be resolved substituted in the string\n   *\n   * @param val the value to substitute the variables into\n   * @return the string with the values for all the variables that can be resolved substituted in the string\n   */\n  const subVars = (val: string): string => {\n    let newVal = val;\n    for (const settingVariable of variablesToSubstitute) {\n      newVal = settingVariable.substituteString(newVal, currentFileUri, currentWorkspaceUri);\n    }\n    return newVal;\n  }\n\n  return associations.map((association: XMLFileAssociation) => {\n    return {\n      pattern: subVars(association.pattern),\n      systemId: subVars(association.systemId)\n    };\n  });\n}\n\n/**\n * Returns true if any of the file associations contain references to variables that refer to current file, and false otherwise\n *\n * @param associations A list of file associations to check\n * @returns true if any of the file associations contain references to variables that refer to current file, and false otherwise\n */\nexport function containsVariableReferenceToCurrentFile(associations: XMLFileAssociation[]): boolean {\n  const fileVariables: VariableSubstitution[] = VARIABLE_SUBSTITUTIONS.filter(variable => variable.kind === VariableSubstitutionKind.File);\n  for (const association of associations) {\n    for (const variable of fileVariables) {\n      if (variable.getReplaceRegExp().test(association.pattern) || variable.getReplaceRegExp().test(association.systemId)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n"],"sourceRoot":""}